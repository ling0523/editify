!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).editify={},e.Vue)}(this,(function(e,t){"use strict";var n=Object.defineProperty,r=(e,t,r)=>(((e,t,r)=>{t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const i={formatNumber(e){return this.isNumber(e)?e.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"):e},isNumber:e=>"number"==typeof e&&!isNaN(e),add:(...e)=>e.reduce(((e,t)=>{let n=0,r=0,i=0;try{n=e.toString().split(".")[1].length}catch(s){}try{r=t.toString().split(".")[1].length}catch(s){}return i=Math.pow(10,Math.max(n,r)),(e*i+t*i)/i})),subtract:(...e)=>e.reduce(((e,t)=>{let n=0,r=0,i=0;try{n=e.toString().split(".")[1].length}catch(s){}try{r=t.toString().split(".")[1].length}catch(s){}return i=Math.pow(10,Math.max(n,r)),(e*i-t*i)/i})),mutiply:(...e)=>e.reduce(((e,t)=>{let n=0,r=e.toString(),i=t.toString();try{n+=r.split(".")[1].length}catch(s){}try{n+=i.split(".")[1].length}catch(s){}return Number(r.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,n)})),divide:(...e)=>e.reduce(((e,t)=>{let n=0,r=0,i=e.toString(),s=t.toString();try{n=i.split(".")[1].length}catch(o){}try{r=s.split(".")[1].length}catch(o){}return i=Number(i.replace(".","")),s=Number(s.replace(".","")),i/s*Math.pow(10,r-n)}))},s={insert(e,t,n){if(!e||"string"!=typeof e)throw new TypeError("The first argument must be a string");if("string"!=typeof t)throw new TypeError("The second argument must be a string");if(!i.isNumber(n))throw new TypeError("The third argument must be a number");if(n<0)throw new Error("The third argument cannot be less than 0");return e.substring(0,n)+t+e.substring(n,e.length)},delete(e,t,n){if(!e||"string"!=typeof e)throw new TypeError("The first argument must be a string");if(!i.isNumber(t))throw new TypeError("The second argument must be a number");if(t<0)throw new Error("The second argument cannot be less than 0");if(!i.isNumber(n))throw new TypeError("The third argument must be a number");if(n<0)throw new Error("The third argument cannot be less than 0");return e.substring(0,t)+e.substring(t+n,e.length)},replace(e,t,n,r){if(!e||"string"!=typeof e)throw new TypeError("The first argument must be a string");if(!i.isNumber(t))throw new TypeError("The second argument must be a number");if(t<0)throw new Error("The second argument cannot be less than 0");if(!i.isNumber(n))throw new TypeError("The third argument must be a number");if(n<0)throw new Error("The third argument cannot be less than 0");if("string"!=typeof r)throw new TypeError("The fourth argument must be a string");return e.substring(0,t)+r+e.substring(n,e.length)},trim(e,t){if("string"!=typeof e)throw new TypeError("The first argument must be a string");let n=e.replace(/(^\s+)|(\s+$)/g,"");return t&&(n=n.replace(/\s/g,"")),n}},o={isWindow:e=>e&&e instanceof Window,getElementPoint(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(this.isElement(t)||(t=document.body),!this.isContains(t,e))throw new Error("The second argument and the first argument have no hierarchical relationship");let n=e,r=0,i=0;for(;this.isElement(e)&&this.isContains(t,e)&&t!==e;)r+=e.offsetTop,i+=e.offsetLeft,e=e.offsetParent;return{top:r,left:i,right:t.offsetWidth-i-n.offsetWidth,bottom:t.offsetHeight-r-n.offsetHeight}},isContains(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(!this.isElement(t,!0))throw new TypeError("The second argument must be an element");return e===t||(e.contains?e.contains(t):e.compareDocumentPosition?!!(16&e.compareDocumentPosition(t)):void 0)},isParentNode(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(!this.isElement(t,!0))throw new TypeError("The second argument must be an element");return e!==t&&t.parentNode===e},children(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(t&&"string"!=typeof t)throw new TypeError("The second argument must be a string");return[...e.querySelectorAll(t||"*")].filter((t=>t.parentNode===e))},siblings(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(t&&"string"!=typeof t)throw new TypeError("The second argument must be a string");if(!e.parentNode)return[];return[...e.parentNode.querySelectorAll(t||"*")].filter((t=>t.parentNode===e.parentNode&&t!=e))},rem2px(e){if(!i.isNumber(e))throw new TypeError("The argument must be a number");let t=this.getCssStyle(document.documentElement,"font-size");return i.mutiply(e,parseFloat(t))},px2rem(e){if(!i.isNumber(e))throw new TypeError("The argument must be a number");let t=this.getCssStyle(document.documentElement,"font-size");return i.divide(e,parseFloat(t))},width(e){"string"==typeof e&&e&&(e=document.body.querySelector(e)),this.isElement(e)||(e=document.body);let t=e.clientWidth,n=parseFloat(this.getCssStyle(e,"padding-left")),r=parseFloat(this.getCssStyle(e,"padding-right"));return i.subtract(t,n,r)},height(e){"string"==typeof e&&e&&(e=document.body.querySelector(e)),this.isElement(e)||(e=document.body);let t=e.clientHeight,n=parseFloat(this.getCssStyle(e,"padding-top")),r=parseFloat(this.getCssStyle(e,"padding-bottom"));return i.subtract(t,n,r)},removeClass(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(!t||"string"!=typeof t)throw new TypeError("The second argument must be a string");let n=e.classList;s.trim(t).split(/\s+/).forEach(((e,t)=>{n.remove(e)}))},addClass(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(!t||"string"!=typeof t)throw new TypeError("The second argument must be a string");let n=e.classList;s.trim(t).split(/\s+/).forEach(((e,t)=>{n.add(e)}))},hasClass(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(!t||"string"!=typeof t)throw new TypeError("The second argument must be a string");let n=e.classList;return s.trim(t).split(/\s+/).every(((e,t)=>n.contains(e)))},scrollTopBottomTrigger(e,t){"string"==typeof e&&e&&(e=document.body.querySelector(e));let n=window;this.isElement(e)&&e!=document.body&&e!=document.documentElement&&(n=e),"function"==typeof e&&(t=e);let r=!0;n.addEventListener("scroll",(e=>{if(this.getScrollTop(n)<=0){if(!r)return;"function"==typeof t&&(r=!1,t({state:"top",target:n}))}else{let e={state:"bottom",target:n},s=0;if(s=n==window?window.innerHeight:n.clientHeight,i.add(this.getScrollTop(n),s)+1>=this.getScrollHeight(n)&&s!=this.getScrollHeight(n)){if(!r)return;"function"==typeof t&&(r=!1,t(e))}else r=!0}}))},getScrollWidth(e){"string"==typeof e&&e&&(e=document.body.querySelector(e));let t=0;return t=this.isElement(e)&&e!=document.documentElement&&e!=document.body?e.scrollWidth:0==document.documentElement.scrollWidth||0==document.body.scrollWidth?document.documentElement.scrollWidth||document.body.scrollWidth:document.documentElement.scrollWidth>document.body.scrollWidth?document.documentElement.scrollWidth:document.body.scrollWidth,t},getScrollHeight(e){"string"==typeof e&&e&&(e=document.body.querySelector(e));let t=0;return t=this.isElement(e)&&e!=document.documentElement&&e!=document.body?e.scrollHeight:0==document.documentElement.scrollHeight||0==document.body.scrollHeight?document.documentElement.scrollHeight||document.body.scrollHeight:document.documentElement.scrollHeight>document.body.scrollHeight?document.documentElement.scrollHeight:document.body.scrollHeight,t},setScrollTop(e){let t=!1,n=e.el;"string"==typeof n&&n&&(n=document.body.querySelector(n));let r=e.number||0,s=e.time||0;return this.isElement(n)&&n!=document.body&&n!=document.documentElement&&n!=window||(t=!0),new Promise(((e,o)=>{if(s<=0)t?document.documentElement.scrollTop=document.body.scrollTop=r:n.scrollTop=r,e();else{let o=10,a=i.divide(s,o),l=this.getScrollTop(n),c=i.divide(i.subtract(r,l),a),d=setInterval((()=>{a>0?(a--,t?document.documentElement.scrollTop=document.body.scrollTop=l=i.add(l,c):n.scrollTop=l=i.add(l,c)):(clearInterval(d),e())}),o)}}))},getScrollTop(e){"string"==typeof e&&e&&(e=document.body.querySelector(e));let t=0;return t=this.isElement(e)&&e!=document.body&&e!=document.documentElement&&e!=window?e.scrollTop:0==document.documentElement.scrollTop||0==document.body.scrollTop?document.documentElement.scrollTop||document.body.scrollTop:document.documentElement.scrollTop>document.body.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,t},getScrollLeft(e){"string"==typeof e&&e&&(e=document.body.querySelector(e));let t=0;return t=this.isElement(e)&&e!=document.body&&e!=document.documentElement&&e!=window?e.scrollLeft:0==document.documentElement.scrollLeft||0==document.body.scrollLeft?document.documentElement.scrollLeft||document.body.scrollLeft:document.documentElement.scrollLeft>document.body.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,t},setScrollLeft(e){let t=!1,n=e.el;"string"==typeof n&&n&&(n=document.body.querySelector(n));let r=e.number||0,s=e.time||0;return this.isElement(n)&&n!=document.body&&n!=document.documentElement&&n!=window||(t=!0),new Promise(((e,o)=>{if(s<=0)t?document.documentElement.scrollLeft=document.body.scrollLeft=r:n.scrollLeft=r,e();else{let o=10,a=i.divide(s,o),l=this.getScrollLeft(n),c=i.divide(i.subtract(r,l),a),d=setInterval((()=>{a>0?(a--,t?document.documentElement.scrollLeft=document.body.scrollLeft=l=i.add(l,c):n.scrollLeft=l=i.add(l,c)):(clearInterval(d),e())}),o)}}))},getCssStyle(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(!t||"string"!=typeof t)throw new TypeError("The second argument must be a string");let n="";return n=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e)[t]:e.currentStyle[t],n},getCssSelector(e){if(!e||"string"!=typeof e)throw new TypeError("The argument must be a selector string");if(/^#{1}/.test(e))return{type:"id",value:e.substr(1)};if(/^\./.test(e))return{type:"class",value:e.substr(1)};if(/^\[(.+)\]$/.test(e)){let t="attribute",n="",r=s.trim(e,!0).substring(1,s.trim(e,!0).length-1).split("=");return 1==r.length&&(n=r[0]),2==r.length&&(n={attributeName:r[0],attributeValue:r[1].replace(/\'/g,"").replace(/\"/g,"")}),{type:t,value:n}}return{type:"tag",value:e}},getElementBounding(e){"string"==typeof e&&e&&(e=document.body.querySelector(e)),this.isElement(e)||(e=document.body);let t=e.getBoundingClientRect();return{top:t.top,bottom:i.subtract(document.documentElement.clientHeight||window.innerHeight,t.bottom),left:t.left,right:i.subtract(document.documentElement.clientWidth||window.innerWidth,t.right)}},isElement:e=>e&&e instanceof Node&&1===e.nodeType,string2dom(e,t="div"){if(!e||"string"!=typeof e)throw new TypeError("The argument must be an HTML string");let n=document.createElement(t);return n.innerHTML=e,1==n.children.length?n.children[0]:n.children}},a="_dap-datas",l={remove(e,t){if(!(e instanceof Document||o.isElement(e)||o.isWindow(e)))throw new TypeError("The first argument must be an element node or window or document");let n=e[a]||{};null==t||""===t?e[a]={}:(delete n[t],e[a]=n)},has(e,t){if(!(e instanceof Document||o.isElement(e)||o.isWindow(e)))throw new TypeError("The first argument must be an element node or window or document");if(null==t||""===t)throw new TypeError("The second parameter must be a unique key");return(e[a]||{}).hasOwnProperty(t)},get(e,t){if(!(e instanceof Document||o.isElement(e)||o.isWindow(e)))throw new TypeError("The first argument must be an element node or window or document");let n=e[a]||{};return null==t||""===t?n:n[t]},set(e,t,n){if(!(e instanceof Document||o.isElement(e)||o.isWindow(e)))throw new TypeError("The first argument must be an element node or window or document");if(null==t||""===t)throw new TypeError("The second parameter must be a unique key");let r=e[a]||{};r[t]=n,e[a]=r}},c={matchingText(e,t){if(!e||"string"!=typeof e)throw new TypeError("The first argument must be a string");if(!t||"string"!=typeof t)throw new TypeError("The second argument must be a string");let n=null;if("Chinese"==t&&(n=/^[\u4e00-\u9fa5]+$/),"chinese"==t&&(n=/[\u4e00-\u9fa5]/),"email"==t&&(n=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/),"userName"==t&&(n=/^[a-zA-Z0-9_]{4,16}$/),"int+"==t&&(n=/^\d+$/),"int-"==t&&(n=/^-\d+$/),"int"==t&&(n=/^-?\d+$/),"pos"==t&&(n=/^\d*\.?\d+$/),"neg"==t&&(n=/^-\d*\.?\d+$/),"number"==t&&(n=/^-?\d*\.?\d+$/),"phone"==t&&(n=/^1[0-9]\d{9}$/),"idCard"==t&&(n=/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/),"url"==t&&(n=/^((https?|ftp|file):\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/),"IPv4"==t&&(n=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/),"hex"==t&&(n=/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/),"date"==t){let t=/^(\d{4})(\/)(\d{2})(\/)(\d{2})$/,n=/^(\d{4})(\.)(\d{2})(\.)(\d{2})$/,r=/^(\d{4})(年)(\d{2})(月)(\d{2})(日)$/;return/^((\d{4})(-)(\d{2})(-)(\d{2}))$/.test(e)||t.test(e)||n.test(e)||r.test(e)}if("time"==t&&(n=/^(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/),"QQ"==t&&(n=/^[1-9][0-9]{4,10}$/),"weixin"==t&&(n=/^[a-zA-Z]([-_a-zA-Z0-9]{5,19})+$/),"plate"==t&&(n=/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-Z0-9]{4}[A-Z0-9挂学警港澳]{1}$/),!n)throw new Error("The second parameter is out of scope");return n.test(e)},getUrlParams(e){if(!e||"string"!=typeof e)throw new TypeError("The argument must be a string");let t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1);if(!n){let e=window.location.hash.split("?");2==e.length&&(n=e[1])}let r=n.match(t);return r?decodeURIComponent(r[2]):null},isEmptyObject(e){return!!this.isObject(e)&&0==Object.keys(e).length},equal(e,t){if(typeof e!=typeof t)return!1;if(this.isObject(e)&&this.isObject(t)){e=Object.assign({},e),t=Object.assign({},t);let n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!=r.length)return!1;let i=n.length;for(let s=0;s<i;s++){let r=n[s],i=e[r],o=t[r];if(this.isObject(i))return!!this.equal(i,o);if(i!==o)return!1}return!0}return e===t},isObject:e=>!("object"!=typeof e||!e),copyText(e){if(!e||"string"!=typeof e)throw new TypeError("No text to copy is defined");let t=o.string2dom('<input type="text" />');document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t)}},d=e=>{let t=e.split(/[\s]+/g),n=[];return t.forEach((e=>{let t=e.split("."),r={eventName:t[0]};t.length>1&&(r.guid=t[1]),n.push(r)})),n},h=(e,t,n)=>{let r=l.get(e,"dap-defined-events")||{},i=Object.keys(r),s=i.length;for(let o=0;o<s;o++){let s=i[o];r[s].type==t&&(n?s==t+"."+n&&(e.removeEventListener(r[s].type,r[s].fn,r[s].options),r[s]=void 0):(e.removeEventListener(r[s].type,r[s].fn,r[s].options),r[s]=void 0))}r=(e=>{let t={};return Object.keys(e).forEach((n=>{e[n]&&(t[n]=e[n])})),t})(r),l.set(e,"dap-defined-events",r)},u={on(e,t,n,r){if(!(e instanceof Document||o.isElement(e)||o.isWindow(e)))throw new TypeError("The first argument must be an element node or window or document");if(!t||"string"!=typeof t)throw new TypeError("The second argument must be a string");if(!n||"function"!=typeof n)throw new TypeError("The third argument must be a function");c.isObject(r)||(r={});d(t).forEach((t=>{((e,t,n,r,i)=>{let s=l.get(e,"dap-defined-events")||{};n||(n=l.get(e,"dap-event-guid")||0,l.set(e,"dap-event-guid",n+1)),s[n=t+"."+n]&&s[n].type==t&&e.removeEventListener(t,s[n].fn,s[n].options),e.addEventListener(t,r,i),s[n]={type:t,fn:r,options:i},l.set(e,"dap-defined-events",s)})(e,t.eventName,t.guid,n.bind(e),r)}))},off(e,t){if(!(e instanceof Document||o.isElement(e)||o.isWindow(e)))throw new TypeError("The first argument must be an element node or window or document");let n=l.get(e,"dap-defined-events");if(!n)return;if(!t){let t=Object.keys(n),r=t.length;for(let i=0;i<r;i++){let r=t[i];e.removeEventListener(n[r].type,n[r].fn,n[r].options)}return l.remove(e,"dap-defined-events"),void l.remove(e,"dap-event-guid")}d(t).forEach((t=>{h(e,t.eventName,t.guid)}))},get(e){if(!(e instanceof Document||o.isElement(e)||o.isWindow(e)))throw new TypeError("The first argument must be an element node or window or document");let t=l.get(e,"dap-defined-events");if(t)return t}},m={getPrevMonths(e,t){e&&e instanceof Date||(e=new Date),i.isNumber(t)||(t=1);let n=[e];for(let r=0;r<t-1;r++){let t=e.getFullYear(),r=e.getMonth();0==r&&(r=12,t--);let i=new Date;i.setMonth(r-1),i.setFullYear(t),n.push(i),e=i}return n},getNextMonths(e,t){e&&e instanceof Date||(e=new Date),i.isNumber(t)||(t=1);let n=[e];for(let r=0;r<t-1;r++){let t=e.getFullYear(),r=e.getMonth();11==r&&(r=-1,t++);let i=new Date;i.setMonth(r+1),i.setFullYear(t),n.push(i),e=i}return n},getDateAfter:(e,t)=>(e&&e instanceof Date||(e=new Date),i.isNumber(t)||(t=1),new Date(e.getTime()+24*t*60*60*1e3)),getDateBefore:(e,t)=>(e&&e instanceof Date||(e=new Date),i.isNumber(t)||(t=1),new Date(e.getTime()-24*t*60*60*1e3)),getDays(e,t){if(!i.isNumber(e))throw new TypeError("The first parameter must be a number representing the year");if(!i.isNumber(t))throw new TypeError("The second argument must be a number representing the month");return e=parseInt(e),t=parseInt(t),new Date(e,t,0).getDate()}},g={rgb2hsv(e){if(!Array.isArray(e)||3!=e.length)throw new TypeError("Invalid argument");let t=0,n=0,r=0,i=e[0]>=255?255:e[0],s=e[1]>=255?255:e[1],o=e[2]>=255?255:e[2];i=i<=0?0:i,s=s<=0?0:s,o=o<=0?0:o;let a=Math.max(i,s,o),l=Math.min(i,s,o);return r=a/255,n=0===a?0:1-l/a,a===l?t=0:a===i&&s>=o?t=(s-o)/(a-l)*60+0:a===i&&s<o?t=(s-o)/(a-l)*60+360:a===s?t=(o-i)/(a-l)*60+120:a===o&&(t=(i-s)/(a-l)*60+240),t=parseInt(t),n=parseInt(100*n),r=parseInt(100*r),[t,n,r]},hsv2rgb(e){if(!Array.isArray(e)||3!=e.length)throw new TypeError("Invalid argument");let t=e[0]>=360||e[0]<=0?0:e[0],n=e[1]>=100?100:e[1];n=n<=0?0:n;let r=e[2]>=100?100:e[2];r=r<=0?0:r,n/=100,r/=100;let i=0,s=0,o=0,a=parseInt(t/60%6),l=t/60-a,c=r*(1-n),d=r*(1-l*n),h=r*(1-(1-l)*n);switch(a){case 0:i=r,s=h,o=c;break;case 1:i=d,s=r,o=c;break;case 2:i=c,s=r,o=h;break;case 3:i=c,s=d,o=r;break;case 4:i=h,s=c,o=r;break;case 5:i=r,s=c,o=d}return i=parseInt(255*i),s=parseInt(255*s),o=parseInt(255*o),[i,s,o]},rgb2hex(e){if(!Array.isArray(e)||3!=e.length)throw new TypeError("Invalid argument");return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1)},hex2rgb(e){if(!e||"string"!=typeof e)throw new TypeError("The argument must be a string");let t=e.toLowerCase();if(!c.matchingText(t,"hex"))throw new TypeError("The argument must be a hexadecimal color value");if(4===t.length){let e="#";for(let n=1;n<4;n+=1)e+=t.slice(n,n+1).concat(t.slice(n,n+1));t=e}let n=[];for(let r=1;r<7;r+=2)n.push(parseInt("0x"+t.slice(r,r+2)));return n}},f={start(e,t){if(!window.SpeechSynthesisUtterance||!window.speechSynthesis)throw new Error("The current browser does not support this syntax");let n={pitch:.8,rate:1,volume:1,start:function(){},end:function(){},pause:function(){},resume:function(){},error:function(){}};c.isObject(t)||(t={}),i.isNumber(t.pitch)&&(n.pitch=t.pitch),i.isNumber(t.rate)&&(n.rate=t.rate),i.isNumber(t.volume)&&(n.volume=t.volume),"function"==typeof t.start&&(n.start=t.start),"function"==typeof t.end&&(n.end=t.end),"function"==typeof t.pause&&(n.pause=t.pause),"function"==typeof t.resume&&(n.resume=t.resume),"function"==typeof t.error&&(n.error=t.error);const r=new SpeechSynthesisUtterance;r.text=e,r.pitch=n.pitch,r.rate=n.rate,r.volume=n.volume,r.lang="zh-CN",r.onstart=t=>{n.start.apply(r,[t,{text:e,pitch:n.pitch,rate:n.rate,volume:n.volume}])},r.onend=t=>{n.end.apply(r,[t,{text:e,pitch:n.pitch,rate:n.rate,volume:n.volume}])},r.onpause=t=>{n.pause.apply(r,[t,{text:e,pitch:n.pitch,rate:n.rate,volume:n.volume}])},r.onresume=t=>{n.resume.apply(r,[t,{text:e,pitch:n.pitch,rate:n.rate,volume:n.volume}])},r.onerror=t=>{n.error.apply(r,[t,{text:e,pitch:n.pitch,rate:n.rate,volume:n.volume}])},window.speechSynthesis.speak(r)},stop(){if(!window.SpeechSynthesisUtterance||!window.speechSynthesis)throw new Error("The current browser does not support this syntax");window.speechSynthesis.cancel()},pause(){if(!window.SpeechSynthesisUtterance||!window.speechSynthesis)throw new Error("The current browser does not support this syntax");window.speechSynthesis.pause()},resume(){if(!window.SpeechSynthesisUtterance||!window.speechSynthesis)throw new Error("The current browser does not support this syntax");window.speechSynthesis.resume()}},p={number:i,data:l,element:o,event:u,common:c,date:m,color:g,file:{getImageUrl(e){if(!(e&&e instanceof File))throw new TypeError("The argument must be a File object");return window.URL.createObjectURL(e)},dataFileToBase64:e=>new Promise(((t,n)=>{e&&e instanceof File||n(new TypeError("The argument must be a File object"));let r=new FileReader;r.readAsDataURL(e),r.onloadend=()=>{let e=r.result;t(e)}})),dataBase64toFile(e,t){if(!e||"string"!=typeof e)throw new TypeError("The first argument must be a string");if(!t||"string"!=typeof t)throw new TypeError("The second argument must be a string");let n=e.split(","),r=n[0].match(/:(.*?);/)[1],i=atob(n[1]),s=i.length,o=new Uint8Array(s);for(;s--;)o[s]=i.charCodeAt(s);return new File([o],t,{type:r})}},string:s,platform:{language:()=>window.navigator.browserLanguage||window.navigator.language,device(){const e=window.navigator.userAgent;return{PC:!e.match(/AppleWebKit.*Mobile.*/),Mobile:!!e.match(/AppleWebKit.*Mobile.*/),iPhone:e.includes("iPhone"),Phone:e.includes("Android")&&/(?:Mobile)/.test(e)||e.includes("iPhone")||/(?:Windows Phone)/.test(e),iPad:e.includes("iPad"),Tablet:e.includes("iPad")||e.includes("Android")&&!/(?:Mobile)/.test(e)||e.includes("Firefox")&&/(?:Tablet)/.test(e),WindowsPhone:/(?:Windows Phone)/.test(e)}},browser(){const e=window.navigator.userAgent;return{Edge:!!e.match(/Edg\/([\d.]+)/),weixin:e.includes("MicroMessenger"),QQ:e.includes("QQ"),QQBrowser:e.includes("MQQBrowser"),UC:e.includes("UCBrowser"),Chrome:e.includes("Chrome"),Firefox:e.includes("Firefox"),sougou:e.toLocaleLowerCase().includes("se 2.x")||e.toLocaleLowerCase().includes("metasr")||e.toLocaleLowerCase().includes("sogou"),Safari:e.includes("Safari")&&!e.includes("Chrome")}},browserKernel(){const e=window.navigator.userAgent;return e.includes("Presto")?"opera":e.includes("AppleWebKit")?"webkit":e.includes("Gecko")&&!e.includes("KHTML")?"gecko":""},os(){const e=window.navigator.userAgent;return{Windows:e.includes("Windows"),Windows_CPU:e.toLocaleLowerCase().includes("win64")||e.toLocaleLowerCase().includes("wow64")?"x64":e.toLocaleLowerCase().includes("win32")||e.toLocaleLowerCase().includes("wow32")?"x32":"",Windows_Version:e.includes("Windows NT 6.1")||e.includes("Windows 7")?"Win7":e.includes("Windows NT 6.3")||e.includes("Windows NT 6.2")||e.includes("Windows NT 8")?"Win8":e.includes("Windows NT 10")||e.includes("Windows NT 6.4")?"Win10":"",Mac:e.includes("Macintosh"),Mac_Version:function(){if(e.includes("Macintosh")){const t=e.match(/Mac OS X ([^\s]+)\)/);if(t&&t[1])return t[1].split(/_|\./).join(".")}return""}(),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),ios_Version:function(){if(e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)){const t=e.match(/CPU.+OS ([^\s]+) like Mac OS X/);if(t&&t[1])return t[1].split(/_|\./).join(".")}return""}(),Android:e.includes("Android"),Android_Version:function(){const t=e.match(/Android ([^\s]+);/);return t&&t[1]?t[1].split(/_|\./).join("."):""}(),Linux:e.includes("Linux"),HarmonyOS:e.includes("HarmonyOS"),Ubuntu:e.includes("Ubuntu")}}},speech:f},b={getAttributes(e){let t={};const n=e.attributes.length;for(let r=0;r<n;r++){const n=e.attributes[r];/(^on)|(^style$)|(^contenteditable$)/g.test(n.nodeName)||(t[n.nodeName]=n.nodeValue)}return t},getStyles(e){let t={};if(e.getAttribute("style")){const n=e.getAttribute("style");let r=0,i=0,s=[];for(;r<n.length;)";"==n[r]&&"base64,"!=n.substring(r+1,r+8)&&(s.push(n.substring(i,r)),i=r+1),r==n.length-1&&i<r&&s.push(n.substring(i,r)),r++;s.forEach((e=>{const n=e.indexOf(":"),r=e.substring(0,n).trim(),i=e.substring(n+1).trim();t[r]=i}))}return t},createUniqueKey(){let e=p.data.get(window,"data-alex-editor-key")||0;return e++,p.data.set(window,"data-alex-editor-key",e),e},isSpaceText:e=>/^[\uFEFF]+$/g.test(e),clone:e=>p.common.isObject(e)||Array.isArray(e)?JSON.parse(JSON.stringify(e)):e,isContains:(e,t)=>3==t.nodeType?p.element.isContains(e,t.parentNode):p.element.isContains(e,t),blobToBase64:e=>new Promise((t=>{const n=new FileReader;n.onload=e=>{t(e.target.result)},n.readAsDataURL(e)})),createGuid(){let e=p.data.get(window,"data-alex-editor-guid")||0;return e++,p.data.set(window,"data-alex-editor-guid",e),e}},y=class{constructor(e,t,n,r,i){this.key=b.createUniqueKey(),this.type=e,this.parsedom=t,this.marks=n,this.styles=r,this.textContent=i,this.children=null,this.parent=null,this.behavior="default",this._elm=null}isBlock(){return"block"==this.type}isInblock(){return"inblock"==this.type}isInline(){return"inline"==this.type}isClosed(){return"closed"==this.type}isText(){return"text"==this.type}isBreak(){return this.isClosed()&&"br"==this.parsedom}isEmpty(){if(this.isText())return!this.textContent;if(this.isBlock()||this.isInblock()||this.isInline()){if(!this.hasChildren())return!0;return this.children.every((e=>!e||e.isEmpty()))}return!1}isSpaceText(){return this.isText()&&!this.isEmpty()&&b.isSpaceText(this.textContent)}isEqual(e){return!!y.isElement(e)&&this.key==e.key}isContains(e){return!!this.isEqual(e)||!e.isBlock()&&this.isContains(e.parent)}isOnlyHasBreak(){return!!this.hasChildren()&&this.children.every((e=>e.isBreak()||e.isEmpty()))}isPreStyle(){const e=this.getBlock(),t=this.getInblock();return t?"pre"==t.parsedom||(!(!t.hasStyles()||"pre"!=t.styles["white-space"]&&"pre-wrap"!=t.styles["white-space"])||t.parent.isPreStyle()):"pre"==e.parsedom||!(!e.hasStyles()||"pre"!=e.styles["white-space"]&&"pre-wrap"!=e.styles["white-space"])}hasMarks(){return!!this.marks&&(!!p.common.isObject&&!p.common.isEmptyObject(this.marks))}hasStyles(){return!!this.styles&&(!!p.common.isObject(this.styles)&&!p.common.isEmptyObject(this.styles))}hasChildren(){return!this.isClosed()&&!this.isText()&&(!!Array.isArray(this.children)&&!!this.children.length)}hasContains(e){return this.isContains(e)||e.isContains(this)}clone(e=!0){if("boolean"!=typeof e)throw new Error("The parameter must be a Boolean");let t=new y(this.type,this.parsedom,b.clone(this.marks),b.clone(this.styles),this.textContent);return t.behavior=this.behavior,e&&this.hasChildren()&&this.children.forEach((n=>{let r=n.clone(e);t.hasChildren()?t.children.push(r):t.children=[r],r.parent=t})),t}convertToBlock(){if(this.isBlock())throw new Error('This element is already of type "block"');let e=this.clone();this.type="block",this.parsedom=y.BLOCK_NODE,this.marks=null,this.styles=null,this.textContent=null,this.children=[e],e.parent=this}toEmpty(){this.isEmpty()||(this.isText()?(this.marks=null,this.styles=null,this.textContent=null,this._elm=null):this.isClosed()?(this.type="text",this.parsedom=null,this.marks=null,this.styles=null,this.textContent=null,this._elm=null):this.hasChildren()&&this.children.forEach((e=>{e.toEmpty()})))}getBlock(){return this.isBlock()?this:this.parent.getBlock()}getInblock(){return this.isInblock()?this:this.isBlock()?null:this.parent.getInblock()}getInline(){return this.isInline()?this:this.isBlock()?null:this.parent.getInline()}isEqualStyles(e){return!this.hasStyles()&&!e.hasStyles()||!!(this.hasStyles()&&e.hasStyles()&&p.common.equal(this.styles,e.styles))}isEqualMarks(e){return!this.hasMarks()&&!e.hasMarks()||!!(this.hasMarks()&&e.hasMarks()&&p.common.equal(this.marks,e.marks))}__getDiffMarks(e){if(this.hasMarks()){if(e.hasMarks()){const t=Object.keys(this.marks),n=Object.keys(e.marks);return{more:t.filter((t=>!(n.includes(t)&&e.marks[t]==this.marks[t]||/(^on)|(^style$)|(^contenteditable$)/g.test(t)))),less:n.filter((n=>!(t.includes(n)&&e.marks[n]==this.marks[n]||/(^on)|(^style$)|(^contenteditable$)/g.test(n))))}}return{more:Object.keys(this.marks).filter((e=>!/(^on)|(^style$)|(^contenteditable$)/g.test(e))),less:[]}}return e.hasMarks()?{more:[],less:Object.keys(e.marks).filter((e=>!/(^on)|(^style$)|(^contenteditable$)/g.test(e)))}:{more:[],less:[]}}__getDiffStyles(e){if(this.hasStyles()){if(e.hasStyles()){const t=Object.keys(this.styles),n=Object.keys(e.styles);return{more:t.filter((t=>!n.includes(t)||e.styles[t]!=this.styles[t])),less:n.filter((n=>!t.includes(n)||e.styles[n]!=this.styles[n]))}}return{more:Object.keys(this.styles),less:[]}}return e.hasStyles()?{more:[],less:Object.keys(e.styles)}:{more:[],less:[]}}__renderElement(){let e=null;if(this.isText()){e=document.createElement(y.TEXT_NODE);const t=document.createTextNode(this.textContent);e.appendChild(t)}else e=document.createElement(this.parsedom),this.hasChildren()&&this.children.forEach((t=>{t.__renderElement(),e.appendChild(t._elm)}));this.hasMarks()&&Object.keys(this.marks).forEach((t=>{/(^on)|(^style$)|(^contenteditable$)/g.test(t)||e.setAttribute(t,this.marks[t])})),this.hasStyles()&&Object.keys(this.styles).forEach((t=>{e.style.setProperty(t,this.styles[t])})),p.data.set(e,"data-alex-editor-key",this.key),this._elm=e}__fullClone(){let e=new y(this.type,this.parsedom,b.clone(this.marks),b.clone(this.styles),this.textContent);return e.behavior=this.behavior,e.key=this.key,e._elm=this._elm,this.hasChildren()&&this.children.forEach((t=>{let n=t.__fullClone();e.hasChildren()?e.children.push(n):e.children=[n],n.parent=e})),e}__getLink(){return"a"==this.parsedom?this:this.isBlock()?null:this.parent.__getLink()}static isElement(e){return e instanceof y}static flatElements(e){const t=e=>{let n=[],r=0;const i=e.length;for(;r<i;)n.push(e[r]),e[r].hasChildren()&&n.push(...t(e[r].children)),r++;return n};return t(e)}static getSpaceElement(){return new y("text",null,null,null,"\ufeff")}};let E=y;r(E,"BLOCK_NODE","p"),r(E,"TEXT_NODE","span"),r(E,"VOID_NODES",["colgroup","col"]);class w{constructor(e,t){this.element=e,this.offset=t,this.__init()}__init(){if(this.element.isText()||this.element.isClosed()){if(E.VOID_NODES.includes(this.element.parsedom))throw new Error("Invisible element cannot be set as focal point")}else 0==this.offset?this.moveToStart(this.element):this.moveToEnd(this.element)}static isPoint(e){return e instanceof w}isEqual(e){return!!w.isPoint(e)&&(this.element.isEqual(e.element)&&this.offset==e.offset)}moveToEnd(e){if(!E.isElement(e))throw new Error("The argument must be an AlexElement instance");if(e.isEmpty())throw new Error("The argument cannot be an empty element");if(e.isText())this.element=e,this.offset=e.textContent.length;else if(e.isClosed()){if(E.VOID_NODES.includes(e.parsedom))throw new Error("Invisible element cannot be set as focal point");this.element=e,this.offset=1}else if(e.hasChildren()){const t=E.flatElements(e.children).filter((e=>!e.isEmpty()&&!E.VOID_NODES.includes(e.parsedom))),n=t.length;this.moveToEnd(t[n-1])}}moveToStart(e){if(!E.isElement(e))throw new Error("The argument must be an AlexElement instance");if(e.isEmpty())throw new Error("The argument cannot be an empty element");if(e.isText())this.element=e,this.offset=0;else if(e.isClosed()){if(E.VOID_NODES.includes(e.parsedom))throw new Error("Invisible element cannot be set as focal point");this.element=e,this.offset=0}else if(e.hasChildren()){const t=E.flatElements(e.children).filter((e=>!e.isEmpty()&&!E.VOID_NODES.includes(e.parsedom)));this.moveToStart(t[0])}}}class _{constructor(e,t){this.anchor=e,this.focus=t}}class v{constructor(){this.records=[],this.current=-1}push(e,t){this.current<this.records.length-1&&(this.records.length=this.current+1);const n=e.map((e=>e.__fullClone())),r=E.flatElements(n).find((e=>e.key==t.anchor.element.key)),i=E.flatElements(n).find((e=>e.key==t.focus.element.key)),s=new w(r,t.anchor.offset),o=new w(i,t.focus.offset),a=new _(s,o);this.records.push({stack:n,range:a}),this.current+=1}get(e){if(-1==e){if(this.current<=0)return null;this.current-=1}else if(1==e){if(this.current>=this.records.length-1)return null;this.current+=1}const{stack:t,range:n}=this.records[this.current],r=t.map((e=>e.__fullClone())),i=E.flatElements(r).find((e=>e.key==n.anchor.element.key)),s=E.flatElements(r).find((e=>e.key==n.focus.element.key)),o=new w(i,n.anchor.offset),a=new w(s,n.focus.offset);return{stack:r,range:new _(o,a)}}}const{Mac:T}=p.platform.os(),k={Undo:e=>T?90==e.keyCode&&e.metaKey&&!e.ctrlKey&&!e.shiftKey&&!e.altKey:90==e.keyCode&&e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey,Redo:e=>T?90==e.keyCode&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey:89==e.keyCode&&e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey},x={block:[{parsedom:"p"},{parsedom:"div"},{parsedom:"table"},{parsedom:"ul"},{parsedom:"ol"},{parsedom:"h1"},{parsedom:"h2"},{parsedom:"h3"},{parsedom:"h4"},{parsedom:"h5"},{parsedom:"h6"},{parsedom:"blockquote"},{parsedom:"pre"},{parsedom:"address",parse:!0},{parsedom:"article",parse:!0},{parsedom:"aside",parse:!0},{parsedom:"nav",parse:!0},{parsedom:"section",parse:!0}],inblock:[{parsedom:"li",block:!0},{parsedom:"tfoot"},{parsedom:"tbody"},{parsedom:"thead"},{parsedom:"tr"},{parsedom:"th"},{parsedom:"td"},{parsedom:"colgroup"}],inline:[{parsedom:"span"},{parsedom:"a"},{parsedom:"label"},{parsedom:"code"},{parsedom:"b",parse:{"font-weight":"bold"}},{parsedom:"strong",parse:{"font-weight":"bold"}},{parsedom:"sup",parse:{"vertical-align":"super"}},{parsedom:"sub",parse:{"vertical-align":"sub"}},{parsedom:"i",parse:{"font-style":"italic"}},{parsedom:"u",parse:{"text-decoration-line":"underline"}},{parsedom:"del",parse:{"text-decoration-line":"line-through"}},{parsedom:"abbr",parse:!0},{parsedom:"acronym",parse:!0},{parsedom:"bdo",parse:!0}],closed:[{parsedom:"br"},{parsedom:"col"},{parsedom:"img"},{parsedom:"hr"},{parsedom:"video"},{parsedom:"audio"}]};class S{constructor(e,t){r(this,"__formatUnchangeableRules",[e=>{if(e.hasChildren()){e.children.filter((e=>!e.isEmpty())).filter((e=>e.isBlock())).forEach((t=>{t.type="inline"==e.type?"inline":"inblock"}))}},e=>{if(e.hasChildren()){const t=e.children.filter((e=>!e.isEmpty()));t.every((e=>e.isInblock()))||t.forEach((e=>{e.isInblock()&&(e.type="inline")}))}},e=>{if(e.isInline()&&e.hasChildren()){e.children.filter((e=>!e.isEmpty())).filter((e=>e.isInblock())).forEach((e=>{e.isInblock()&&(e.type="inline")}))}},e=>{if(e.hasChildren()){const t=e.children.filter((e=>!e.isEmpty()));if(t.every((e=>e.isBreak()))&&t.length){const n=t[0];e.isContains(this.range.anchor.element)&&this.range.anchor.moveToStart(n),e.isContains(this.range.focus.element)&&this.range.focus.moveToStart(n),e.children=[n]}else e.children.forEach((e=>{e.isBreak()&&e.toEmpty()}))}},e=>{const t=(e,t)=>{if(e.isEmpty()||t.isEmpty()){if(t.isEmpty()){t.isContains(this.range.anchor.element)&&(e.isEmpty()?(this.range.anchor.element=e,this.range.anchor.offset=0):this.range.anchor.moveToEnd(e)),t.isContains(this.range.focus.element)&&(e.isEmpty()?(this.range.focus.element=e,this.range.focus.offset=0):this.range.focus.moveToEnd(e));const n=t.parent.children.findIndex((e=>t.isEqual(e)));t.parent.children.splice(n,1)}else if(e.isEmpty()){e.isContains(this.range.anchor.element)&&(t.isEmpty()?(this.range.anchor.element=t,this.range.anchor.offset=0):this.range.anchor.moveToStart(t)),e.isContains(this.range.focus.element)&&(t.isEmpty()?(this.range.focus.element=t,this.range.focus.offset=0):this.range.focus.moveToStart(t));const n=e.parent.children.findIndex((t=>e.isEqual(t)));e.parent.children.splice(n,1)}}else if(e.isText()){t.isEqual(this.range.anchor.element)&&(this.range.anchor.element=e,this.range.anchor.offset=e.textContent.length+this.range.anchor.offset),t.isEqual(this.range.focus.element)&&(this.range.focus.element=e,this.range.focus.offset=e.textContent.length+this.range.focus.offset),e.textContent+=t.textContent;const n=t.parent.children.findIndex((e=>t.isEqual(e)));t.parent.children.splice(n,1)}else if(e.isInline()){e.children.push(...t.children),e.children.forEach((t=>{t.parent=e})),n(e);const r=t.parent.children.findIndex((e=>t.isEqual(e)));t.parent.children.splice(r,1)}},n=e=>{if(e.hasChildren()&&e.children.length>1){let i=0;for(;i<=e.children.length-2;)n=e.children[i],r=e.children[i+1],n.isEmpty()||r.isEmpty()||(n.isText()&&r.isText()?n.isEqualStyles(r)&&n.isEqualMarks(r):n.isInline()&&r.isInline()&&n.parsedom==r.parsedom&&n.isEqualMarks(r)&&n.isEqualStyles(r))?t(e.children[i],e.children[i+1]):i++}var n,r};n(e)},e=>{const t=(e,t)=>{t.isText()?(e.type="text",e.parsedom=null,t.hasMarks()&&(e.hasMarks()?Object.assign(e.marks,b.clone(t.marks)):e.marks=b.clone(t.marks)),t.hasStyles()&&(e.hasStyles()?Object.assign(e.styles,b.clone(t.styles)):e.styles=b.clone(t.styles)),e.textContent=t.textContent,e.children=null,t.isContains(this.range.anchor.element)&&(this.range.anchor.element=e),t.isContains(this.range.focus.element)&&(this.range.focus.element=e)):(t.hasMarks()&&(e.hasMarks()?Object.assign(e.marks,b.clone(t.marks)):e.marks=b.clone(t.marks)),t.hasStyles()&&(e.hasStyles()?Object.assign(e.styles,b.clone(t.styles)):e.styles=b.clone(t.styles)),t.hasChildren()&&(e.children=[...t.children],e.children.forEach((t=>{t.parent=e}))))};var n,r;e.hasChildren()&&1==e.children.length&&(n=e,(r=e.children[0]).isText()&&n.isInline()?n.parsedom==E.TEXT_NODE:(n.isInline()&&r.isInline()||n.isInblock()&&r.isInblock())&&n.parsedom==r.parsedom)&&t(e,e.children[0])}]),this.$el=(e=>{if("string"==typeof e&&e&&(e=document.body.querySelector(e)),!p.element.isElement(e))throw new Error("You must specify a dom container to initialize the editor");if(p.data.get(e,"data-alex-editor-init"))throw new Error("The element node has been initialized to the editor");return p.data.set(e,"data-alex-editor-init",!0),e})(e);const n=(e=>{let t={disabled:!1,renderRules:[],value:"",allowCopy:!0,allowPaste:!0,allowCut:!0,allowPasteHtml:!1,customTextPaste:null,customHtmlPaste:null,customImagePaste:null,customVideoPaste:null};return p.common.isObject(e)&&("boolean"==typeof e.disabled&&(t.disabled=e.disabled),Array.isArray(e.renderRules)&&(t.renderRules=e.renderRules),"string"==typeof e.value&&e.value&&(t.value=e.value),"boolean"==typeof e.allowCopy&&(t.allowCopy=e.allowCopy),"boolean"==typeof e.allowPaste&&(t.allowPaste=e.allowPaste),"boolean"==typeof e.allowCut&&(t.allowCut=e.allowCut),"boolean"==typeof e.allowPasteHtml&&(t.allowPasteHtml=e.allowPasteHtml),"function"==typeof e.customTextPaste&&(t.customTextPaste=e.customTextPaste),"function"==typeof e.customHtmlPaste&&(t.customHtmlPaste=e.customHtmlPaste),"function"==typeof e.customImagePaste&&(t.customImagePaste=e.customImagePaste),"function"==typeof e.customVideoPaste&&(t.customVideoPaste=e.customVideoPaste)),t})(t);this.disabled=n.disabled,this.value=n.value,this.allowCopy=n.allowCopy,this.allowPaste=n.allowPaste,this.allowCut=n.allowCut,this.allowPasteHtml=n.allowPasteHtml,this.customTextPaste=n.customTextPaste,this.customHtmlPaste=n.customHtmlPaste,this.customImagePaste=n.customImagePaste,this.customVideoPaste=n.customVideoPaste,this.range=null,this.useClipboard=window.ClipboardItem?!!navigator.clipboard||(console.warn("navigator.clipboard must be obtained in a secure environment, such as localhost, 127.0.0.1, or https, so the editor's copy, paste, and cut functions cannot be used"),!1):(console.warn("window.ClipboardItem must be obtained in a secure environment, such as localhost, 127.0.0.1, or https, so the editor's copy, paste, and cut functions cannot be used"),!1),this.history=new v,this.stack=this.parseHtml(this.value),this.__renderRules=n.renderRules,this.__guid=b.createGuid(),this.__events={},this.__firstRender=!0,this.__isInputChinese=!1,this.__innerSelectionChange=!1,this.__chineseInputTimer=null,this.__initRange(),this.disabled?this.setDisabled():this.setEnabled(),p.event.on(document,`selectionchange.alex_editor_${this.__guid}`,this.__handleSelectionChange.bind(this)),p.event.on(this.$el,"beforeinput.alex_editor",this.__handleBeforeInput.bind(this)),p.event.on(this.$el,"compositionstart.alex_editor compositionupdate.alex_editor compositionend.alex_editor",this.__handleChineseInput.bind(this)),p.event.on(this.$el,"keydown.alex_editor",this.__handleKeydown.bind(this)),p.event.on(this.$el,"cut.alex_editor",this.__handleCut.bind(this)),p.event.on(this.$el,"paste.alex_editor",this.__handlePaste.bind(this)),p.event.on(this.$el,"copy.alex_editor",this.__handleCopy.bind(this)),p.event.on(this.$el,"dragstart.alex_editor drop.alex_editor ",this.__handleDragDrop.bind(this)),p.event.on(this.$el,"focus.alex_editor",this.__handleFocus.bind(this)),p.event.on(this.$el,"blur.alex_editor",this.__handleBlur.bind(this))}__initRange(){const e=this.stack[0],t=new w(e,0),n=new w(e,0);this.range=new _(t,n)}__setRecentlyPoint(e){const t=this.getPreviousElementOfPoint(e),n=this.getNextElementOfPoint(e),r=e.element.getBlock(),i=e.element.getInblock();t&&i&&i.isContains(t)?e.moveToEnd(t):n&&i&&i.isContains(n)?e.moveToStart(n):t&&r.isContains(t)?e.moveToEnd(t):n&&r.isContains(n)?e.moveToStart(n):t?e.moveToEnd(t):n&&e.moveToStart(n)}__emptyDefaultBehaviorInblock(e){e.isInblock()&&"default"==e.behavior&&e.hasChildren()&&e.children.forEach((e=>{if(e.isInblock())this.__emptyDefaultBehaviorInblock(e);else if(e.toEmpty(),e.parent.isEmpty()){const t=new E("closed","br",null,null,null);this.addElementTo(t,e.parent)}}))}__setRangeInVisible(){const e=async e=>{const t=p.element.getScrollHeight(e);if(e.clientHeight<t){const t=window.getSelection();if(0==t.rangeCount)return;const n=t.getRangeAt(0),r=n.getClientRects();let i=n;0==r.length&&(i=this.range.focus.element._elm);const s=i.getBoundingClientRect(),o=e.getBoundingClientRect();if(s.top<o.top){await p.element.setScrollTop({el:e,number:0});const t=i.getBoundingClientRect(),n=e.getBoundingClientRect();p.element.setScrollTop({el:e,number:t.top-n.top-2*t.height})}else if(s.bottom>o.bottom){await p.element.setScrollTop({el:e,number:0});const t=i.getBoundingClientRect(),n=e.getBoundingClientRect();p.element.setScrollTop({el:e,number:t.bottom-n.bottom+2*t.height})}}};let t=this.$el;for(;p.element.isElement(t)&&t!=document.documentElement;)e(t),t=t.parentNode}__handleSelectionChange(){if(this.__isInputChinese)return;if(this.__innerSelectionChange)return;const e=window.getSelection();if(e.rangeCount){const t=e.getRangeAt(0);if(b.isContains(this.$el,t.startContainer)&&b.isContains(this.$el,t.endContainer)){let e=null,n=null,r=null,i=null;if(3==t.startContainer.nodeType)e=t.startContainer.parentNode,r=t.startOffset;else if(1==t.startContainer.nodeType){const n=Array.from(t.startContainer.childNodes);n.length?(e=n[t.startOffset]?n[t.startOffset]:n[t.startOffset-1],r=n[t.startOffset]?0:1,3==e.nodeType&&(r=0==r?0:e.textContent.length,e=e.parentNode)):(e=t.startContainer,r=0)}if(3==t.endContainer.nodeType)n=t.endContainer.parentNode,i=t.endOffset;else if(1==t.endContainer.nodeType){const e=Array.from(t.endContainer.childNodes);e.length?(n=e[t.endOffset]?e[t.endOffset]:e[t.endOffset-1],i=e[t.endOffset]?0:1,3==n.nodeType&&(i=0==i?0:n.textContent.length,n=n.parentNode)):(n=t.endContainer,i=1)}const s=p.data.get(e,"data-alex-editor-key"),o=p.data.get(n,"data-alex-editor-key"),a=this.getElementByKey(s),l=this.getElementByKey(o),c=new w(a,r),d=new w(l,i);this.range=new _(c,d),this.emit("rangeUpdate",this.range)}}}__handleBeforeInput(e){this.disabled||"deleteByCut"!=e.inputType&&"insertFromPaste"!=e.inputType&&"deleteByDrag"!=e.inputType&&"insertFromDrop"!=e.inputType&&(e.preventDefault(),"insertText"==e.inputType&&e.data?(this.insertText(e.data),this.formatElementStack(),this.domRender(),this.rangeRender()):"insertParagraph"==e.inputType||"insertLineBreak"==e.inputType?(this.insertParagraph(),this.formatElementStack(),this.domRender(),this.rangeRender()):"deleteContentBackward"==e.inputType&&(this.delete(),this.formatElementStack(),this.domRender(),this.rangeRender()))}__handleChineseInput(e){this.disabled||(e.preventDefault(),"compositionstart"==e.type?(this.__chineseInputTimer&&(clearTimeout(this.__chineseInputTimer),this.__chineseInputTimer=null),this.__isInputChinese=!0):"compositionend"==e.type&&(e.data&&(this.insertText(e.data),this.formatElementStack(),this.domRender(),this.rangeRender()),this.__chineseInputTimer=setTimeout((()=>{this.__isInputChinese=!1}),0)))}__handleKeydown(e){if(!this.disabled&&!this.__isInputChinese)if(k.Undo(e)){e.preventDefault();const t=this.history.get(-1);t&&(this.stack=t.stack,this.range=t.range,this.formatElementStack(),this.domRender(!0),this.rangeRender())}else if(k.Redo(e)){e.preventDefault();const t=this.history.get(1);t&&(this.stack=t.stack,this.range=t.range,this.formatElementStack(),this.domRender(!0),this.rangeRender())}}async __handleCopy(e){e.preventDefault(),await this.copy()}async __handleCut(e){e.preventDefault();await this.cut()&&!this.disabled&&(this.formatElementStack(),this.domRender(),this.rangeRender())}async __handlePaste(e){e.preventDefault(),this.disabled||(await this.paste(),this.formatElementStack(),this.domRender(),this.rangeRender())}__handleDragDrop(e){e.preventDefault()}__handleFocus(e){this.disabled||this.emit("focus",this.value)}__handleBlur(e){this.disabled||this.emit("blur",this.value)}async paste(){if(this.disabled)return;if(!this.useClipboard)return;if(!this.allowPaste)return;const e=(await navigator.clipboard.read())[0],t=[];e.types.forEach((n=>{t.push(e.getType(n))}));const n=await Promise.all(t),r=n.length;if(n.some((e=>"text/html"==e.type)))for(let i=0;i<r;i++){const e=n[i];if("text/plain"!=e.type||this.allowPasteHtml){if("text/html"==e.type&&this.allowPasteHtml){const t=await e.text();if(t){const e=this.parseHtml(t).filter((e=>!e.isEmpty()));if("function"==typeof this.customHtmlPaste)this.customHtmlPaste.apply(this,[t,e]);else{for(let t=0;t<e.length;t++)this.insertElement(e[t],!1);this.emit("pasteHtml",t,e)}}}}else{const t=await e.text();t&&("function"==typeof this.customTextPaste?this.customTextPaste.apply(this,[t]):(this.insertText(t),this.emit("pasteText",t)))}}else for(let i=0;i<r;i++){const e=n[i];if(e.type.startsWith("image/")){const t=await b.blobToBase64(e);if("function"==typeof this.customImagePaste)this.customImagePaste.apply(this,[t]);else{const e=new E("closed","img",{src:t},null,null);this.insertElement(e),this.emit("pasteImage",t)}}else if(e.type.startsWith("video/")){const t=await b.blobToBase64(e);if("function"==typeof this.customVideoPaste)this.customVideoPaste.apply(this,[t]);else{const e=new E("closed","video",{src:t},null,null);this.insertElement(e),this.emit("pasteVideo",t)}}else if("text/plain"==e.type){const t=await e.text();t&&("function"==typeof this.customTextPaste?this.customTextPaste.apply(this,[t]):(this.insertText(t),this.emit("pasteText",t)))}}}async cut(){if(!this.useClipboard)return;if(!this.allowCut)return;const e=await this.copy(!0);return e&&(this.disabled||this.delete(),this.emit("cut",e.text,e.html)),e}async copy(e=!1){if(!this.useClipboard)return;if(!this.allowCopy)return;let t=this.getElementsByRange(!0,!1);if(0==t.length)return;let n="",r="";t.forEach((e=>{const t=e.element.clone();e.offset&&(t.textContent=t.textContent.substring(e.offset[0],e.offset[1])),t.__renderElement(),n+=t._elm.outerHTML,r+=t._elm.innerText}));const i=new window.ClipboardItem({"text/html":new Blob([n],{type:"text/html"}),"text/plain":new Blob([r],{type:"text/plain"})});return await navigator.clipboard.write([i]),e||this.emit("copy",r,n),{text:r,html:n}}delete(){if(!this.disabled){if(this.range.anchor.isEqual(this.range.focus)){const e=this.getPreviousElementOfPoint(this.range.anchor),t=this.range.anchor.element.getBlock(),n=this.range.anchor.element.getInblock();if(n)if(0==this.range.anchor.offset)if(e){if(n.isContains(e))return this.range.anchor.moveToEnd(e),this.range.focus.moveToEnd(e),void this.delete();if("block"==n.behavior){const t=e.getBlock(),r=e.getInblock();r?"block"==r.behavior&&this.mergeBlockElement(n,r):this.mergeBlockElement(n,t)}}else this.emit("deleteInStart",n);else if(this.range.anchor.element.isSpaceText()){if(this.range.anchor.element.toEmpty(),!n.isEmpty())return this.range.anchor.offset=0,this.range.focus.offset=0,void this.delete();{const e=new E("closed","br",null,null,null);this.addElementTo(e,n),this.range.anchor.moveToStart(e),this.range.focus.moveToStart(e)}}else if(this.range.anchor.element.isText()){const e=this.range.anchor.element.textContent;this.range.anchor.offset-=1;const t=b.isSpaceText(e[this.range.anchor.offset]);if(this.range.anchor.element.textContent=e.substring(0,this.range.anchor.offset)+e.substring(this.range.focus.offset),this.range.focus.offset=this.range.anchor.offset,t)return void this.delete();if(n.isEmpty()){const e=new E("closed","br",null,null,null);this.addElementTo(e,n),this.range.anchor.moveToStart(e),this.range.focus.moveToStart(e)}}else{const t=this.range.anchor.element.isBreak();if(this.range.anchor.element.toEmpty(),n.isEmpty())if(t&&"default"!=n.behavior){if(!e){const e=new E("closed","br",null,null,null);this.addElementTo(e,n),this.range.anchor.moveToStart(e),this.range.focus.moveToStart(e)}}else{const e=new E("closed","br",null,null,null);this.addElementTo(e,n),this.range.anchor.moveToStart(e),this.range.focus.moveToStart(e)}}else if(0==this.range.anchor.offset)if(e){if(t.isContains(e))return this.range.anchor.moveToEnd(e),this.range.focus.moveToEnd(e),void this.delete();{const n=e.getInblock(),r=e.getBlock();n?"block"==n.behavior&&this.mergeBlockElement(t,n):this.mergeBlockElement(t,r)}}else this.emit("deleteInStart",t);else if(this.range.anchor.element.isSpaceText()){if(this.range.anchor.element.toEmpty(),!t.isEmpty())return this.range.anchor.offset=0,this.range.focus.offset=0,void this.delete();{const e=new E("closed","br",null,null,null);this.addElementTo(e,t),this.range.anchor.moveToStart(e),this.range.focus.moveToStart(e)}}else if(this.range.anchor.element.isText()){const e=this.range.anchor.element.textContent;this.range.anchor.offset-=1;const n=b.isSpaceText(e[this.range.anchor.offset]);if(this.range.anchor.element.textContent=e.substring(0,this.range.anchor.offset)+e.substring(this.range.focus.offset),this.range.focus.offset=this.range.anchor.offset,n)return void this.delete();if(t.isEmpty()){const e=new E("closed","br",null,null,null);this.addElementTo(e,t),this.range.anchor.moveToStart(e),this.range.focus.moveToStart(e)}}else{const n=this.range.anchor.element.isBreak();if(this.range.anchor.element.toEmpty(),t.isEmpty()&&(!n||!e)){const e=new E("closed","br",null,null,null);this.addElementTo(e,t),this.range.anchor.moveToStart(e),this.range.focus.moveToStart(e)}}}else{const e=this.getElementsByRange(!0,!1).filter((e=>!E.VOID_NODES.includes(e.element.parsedom))),t=this.range.anchor.element.getInblock(),n=this.range.focus.element.getInblock(),r=this.range.anchor.element.getBlock(),i=this.range.focus.element.getBlock();t&&n&&t.isEqual(n)?e.forEach((e=>{if(e.offset?e.element.textContent=e.element.textContent.substring(0,e.offset[0])+e.element.textContent.substring(e.offset[1]):e.element.toEmpty(),t.isEmpty()){const e=new E("closed","br",null,null,null);this.addElementTo(e,t)}})):t&&n?(e.forEach((e=>{if(e.offset)e.element.textContent=e.element.textContent.substring(0,e.offset[0])+e.element.textContent.substring(e.offset[1]);else if(e.element.isInblock()&&"default"==e.element.behavior)this.__emptyDefaultBehaviorInblock(e.element);else if(e.element.toEmpty(),e.element.parent&&(e.element.parent.isInblock()||e.element.parent.isBlock())&&e.element.parent.isEmpty()){const t=new E("closed","br",null,null,null);this.addElementTo(t,e.element.parent)}})),"block"==t.behavior&&"block"==n.behavior&&this.mergeBlockElement(n,t)):t?(e.forEach((e=>{if(e.offset)e.element.textContent=e.element.textContent.substring(0,e.offset[0])+e.element.textContent.substring(e.offset[1]);else if(e.element.isInblock()&&"default"==e.element.behavior)this.__emptyDefaultBehaviorInblock(e.element);else if(e.element.toEmpty(),e.element.parent&&(e.element.parent.isInblock()||e.element.parent.isBlock())&&e.element.parent.isEmpty()){const t=new E("closed","br",null,null,null);this.addElementTo(t,e.element.parent)}})),"block"==t.behavior&&this.mergeBlockElement(i,t)):n?(e.forEach((e=>{if(e.offset)e.element.textContent=e.element.textContent.substring(0,e.offset[0])+e.element.textContent.substring(e.offset[1]);else if(e.element.isInblock()&&"default"==e.element.behavior)this.__emptyDefaultBehaviorInblock(e.element);else if(e.element.toEmpty(),e.element.parent&&(e.element.parent.isInblock()||e.element.parent.isBlock())&&e.element.parent.isEmpty()){const t=new E("closed","br",null,null,null);this.addElementTo(t,e.element.parent)}})),"block"==n.behavior&&this.mergeBlockElement(n,r)):r.isEqual(i)?e.forEach((e=>{if(e.offset?e.element.textContent=e.element.textContent.substring(0,e.offset[0])+e.element.textContent.substring(e.offset[1]):e.element.toEmpty(),r.isEmpty()){const e=new E("closed","br",null,null,null);this.addElementTo(e,r)}})):(e.forEach((e=>{if(e.offset)e.element.textContent=e.element.textContent.substring(0,e.offset[0])+e.element.textContent.substring(e.offset[1]);else if(e.element.isInblock()&&"default"==e.element.behavior)this.__emptyDefaultBehaviorInblock(e.element);else if(e.element.toEmpty(),e.element.parent&&(e.element.parent.isInblock()||e.element.parent.isBlock())&&e.element.parent.isEmpty()){const t=new E("closed","br",null,null,null);this.addElementTo(t,e.element.parent)}})),this.mergeBlockElement(i,r))}this.range.anchor.element.isEmpty()&&this.__setRecentlyPoint(this.range.anchor),this.range.focus.element=this.range.anchor.element,this.range.focus.offset=this.range.anchor.offset}}insertText(e){if(!this.disabled){if(!e||"string"!=typeof e)throw new Error("The argument must be a string");if(this.range.anchor.isEqual(this.range.focus))if(this.range.anchor.element.isPreStyle()||(e=e.replace(/\s/g,(()=>{const e=document.createElement("span");return e.innerHTML="&nbsp;",e.innerText}))),this.range.anchor.element.isText()){let t=this.range.anchor.element.textContent;this.range.anchor.element.textContent=t.substring(0,this.range.anchor.offset)+e+t.substring(this.range.anchor.offset),this.range.anchor.offset=this.range.anchor.offset+e.length,this.range.focus.offset=this.range.anchor.offset}else{const t=new E("text",null,null,null,e);0==this.range.anchor.offset?this.addElementBefore(t,this.range.anchor.element):this.addElementAfter(t,this.range.anchor.element),this.range.anchor.moveToEnd(t),this.range.focus.moveToEnd(t)}else this.delete(),this.insertText(e)}}insertParagraph(){if(!this.disabled)if(this.range.anchor.isEqual(this.range.focus)){const e=this.getPreviousElementOfPoint(this.range.anchor),t=this.getNextElementOfPoint(this.range.anchor),n=this.range.anchor.element.getBlock(),r=this.range.anchor.element.getInblock(),i=this.range.anchor.element.isText()?this.range.anchor.element.textContent.length:1;if(r){if(this.range.anchor.element.isPreStyle()){this.insertText("\n");const e=E.getSpaceElement();this.insertElement(e),this.range.anchor.moveToEnd(e),this.range.focus.moveToEnd(e),this.emit("insertParagraph",null,r)}else if("block"==r.behavior)if(0!=this.range.anchor.offset||e&&r.isContains(e))if(this.range.anchor.offset!=i||t&&r.isContains(t)){const e=r.clone();this.addElementAfter(e,r);const t=E.flatElements(r.children).findIndex((e=>this.range.anchor.element.isEqual(e)));this.range.focus.moveToEnd(r),this.delete();const n=E.flatElements(e.children);this.range.focus.element=n[t],this.range.focus.offset=this.range.anchor.offset,this.range.anchor.moveToStart(e),this.delete(),this.emit("insertParagraph",e,r)}else{const e=r.clone(!1),t=new E("closed","br",null,null,null);this.addElementTo(t,e),this.addElementAfter(e,r),this.range.anchor.moveToStart(t),this.range.focus.moveToStart(t),this.emit("insertParagraph",e,r)}else{const e=r.clone(!1),t=new E("closed","br",null,null,null);this.addElementTo(t,e),this.addElementBefore(e,r),this.emit("insertParagraph",r,e)}}else if(this.range.anchor.element.isPreStyle()){this.insertText("\n");const e=E.getSpaceElement();this.insertElement(e),this.range.anchor.moveToEnd(e),this.range.focus.moveToEnd(e),this.emit("insertParagraph",null,n)}else if(0!=this.range.anchor.offset||e&&n.isContains(e))if(this.range.anchor.offset!=i||t&&n.isContains(t)){const e=n.clone();this.addElementAfter(e,n);const t=E.flatElements(n.children).findIndex((e=>this.range.anchor.element.isEqual(e)));this.range.focus.moveToEnd(n),this.delete();const r=E.flatElements(e.children);this.range.focus.element=r[t],this.range.focus.offset=this.range.anchor.offset,this.range.anchor.moveToStart(e),this.delete(),this.emit("insertParagraph",e,n)}else{const e=n.clone(!1),t=new E("closed","br",null,null,null);this.addElementTo(t,e),this.addElementAfter(e,n),this.range.anchor.moveToStart(t),this.range.focus.moveToStart(t),this.emit("insertParagraph",e,n)}else{const e=n.clone(!1),t=new E("closed","br",null,null,null);this.addElementTo(t,e),this.addElementBefore(e,n),this.emit("insertParagraph",n,e)}}else this.delete(),this.insertParagraph()}insertElement(e,t=!0){if(!this.disabled){if(!E.isElement(e))throw new Error("The argument must be an AlexElement instance");if(!e.isEmpty())if(this.range.anchor.isEqual(this.range.focus)){const n=this.getPreviousElementOfPoint(this.range.anchor),r=this.getNextElementOfPoint(this.range.anchor),i=this.range.anchor.element.getBlock(),s=this.range.anchor.element.getInblock(),o=this.range.anchor.element.isText()?this.range.anchor.element.textContent.length:1;if(e.isInblock()&&"block"==e.behavior&&s&&"block"==s.behavior)if(s.isOnlyHasBreak()&&t)this.addElementBefore(e,s),s.toEmpty();else if(0!=this.range.anchor.offset||n&&s.isContains(n))if(this.range.anchor.offset!=o||r&&s.isContains(r)){const t=s.clone();this.addElementAfter(t,s),this.range.focus.moveToEnd(s),this.delete();const n=E.flatElements(s.children).findIndex((e=>this.range.anchor.element.isEqual(e))),r=E.flatElements(t.children);this.range.focus.element=r[n],this.range.focus.offset=this.range.anchor.offset,this.range.anchor.moveToStart(t),this.delete(),this.addElementBefore(e,t)}else this.addElementAfter(e,s);else this.addElementBefore(e,s);else if(e.isInblock()&&s)if(s.isOnlyHasBreak())this.addElementTo(e,s,0);else if(0!=this.range.anchor.offset||n&&s.isContains(n))if(this.range.anchor.offset!=o||r&&s.isContains(r)){const t=s.clone();this.addElementAfter(t,s),this.range.focus.moveToEnd(s),this.delete();const n=E.flatElements(s.children).findIndex((e=>this.range.anchor.element.isEqual(e))),r=E.flatElements(t.children);this.range.focus.element=r[n],this.range.focus.offset=this.range.anchor.offset,this.range.anchor.moveToStart(t),this.delete(),this.addElementTo(e,t),this.mergeBlockElement(t,s)}else this.addElementTo(e,s,s.children.length);else this.addElementTo(e,s,0);else if(e.isInblock())if(i.isOnlyHasBreak())this.addElementTo(e,i,0);else if(0!=this.range.anchor.offset||n&&i.isContains(n))if(this.range.anchor.offset!=o||r&&i.isContains(r)){const t=i.clone();this.addElementAfter(t,i),this.range.focus.moveToEnd(i),this.delete();const n=E.flatElements(i.children).findIndex((e=>this.range.anchor.element.isEqual(e))),r=E.flatElements(t.children);this.range.focus.element=r[n],this.range.focus.offset=this.range.anchor.offset,this.range.anchor.moveToStart(t),this.delete(),this.addElementTo(e,t),this.mergeBlockElement(t,i)}else this.addElementTo(e,i,i.children.length);else this.addElementTo(e,i,0);else if(e.isBlock())if(i.isOnlyHasBreak()&&t)this.addElementBefore(e,i),i.toEmpty();else if(0!=this.range.anchor.offset||n&&i.isContains(n))if(this.range.anchor.offset!=o||r&&i.isContains(r)){const t=i.clone();this.addElementAfter(t,i),this.range.focus.moveToEnd(i),this.delete();const n=E.flatElements(i.children).findIndex((e=>this.range.anchor.element.isEqual(e))),r=E.flatElements(t.children);this.range.focus.element=r[n],this.range.focus.offset=this.range.anchor.offset,this.range.anchor.moveToStart(t),this.delete(),this.addElementBefore(e,t)}else this.addElementAfter(e,i);else this.addElementBefore(e,i);else if(this.range.anchor.element.isText()){let t=this.range.anchor.element.textContent,n=this.range.anchor.element.clone();this.range.anchor.element.textContent=t.substring(0,this.range.anchor.offset),n.textContent=t.substring(this.range.anchor.offset),this.addElementAfter(n,this.range.anchor.element),this.addElementBefore(e,n)}else 0==this.range.anchor.offset?this.addElementBefore(e,this.range.anchor.element):this.addElementAfter(e,this.range.anchor.element);this.range.anchor.moveToEnd(e),this.range.focus.moveToEnd(e)}else this.delete(),this.insertElement(e,t)}}formatElementStack(){let e=this.__renderRules.filter((e=>"function"==typeof e));const t=n=>{if([...e,...this.__formatUnchangeableRules].forEach((e=>{e.apply(this,[n])})),n.hasChildren()){let e=0;for(;e<n.children.length;){const r=n.children[e];r.isEmpty()?(r.isContains(this.range.anchor.element)&&this.__setRecentlyPoint(this.range.anchor),r.isContains(this.range.focus.element)&&this.__setRecentlyPoint(this.range.focus),n.children.splice(e,1)):(t(r),r.isEmpty()?(r.isContains(this.range.anchor.element)&&this.__setRecentlyPoint(this.range.anchor),r.isContains(this.range.focus.element)&&this.__setRecentlyPoint(this.range.focus),n.children.splice(e,1)):e++)}}};let n=0;for(;n<this.stack.length;){const e=this.stack[n];e.isEmpty()?(e.isContains(this.range.anchor.element)&&this.__setRecentlyPoint(this.range.anchor),e.isContains(this.range.focus.element)&&this.__setRecentlyPoint(this.range.focus),this.stack.splice(n,1)):(e.isBlock()||e.convertToBlock(),t(e),e.isEmpty()?(e.isContains(this.range.anchor.element)&&this.__setRecentlyPoint(this.range.anchor),e.isContains(this.range.focus.element)&&this.__setRecentlyPoint(this.range.focus),this.stack.splice(n,1)):n++)}if(0==this.stack.length){const e=new E("block",E.BLOCK_NODE,null,null,null),t=new E("closed","br",null,null,null);this.addElementTo(t,e),this.stack=[e],this.range.anchor.moveToStart(t),this.range.focus.moveToStart(t)}}domRender(e=!1){this.emit("beforeRender");const t=document.createDocumentFragment();this.stack.forEach((e=>{e.__renderElement(),t.appendChild(e._elm)})),this.$el.innerHTML="",this.$el.appendChild(t);const n=this.value;this.value=this.$el.innerHTML,(this.__firstRender||n!=this.value)&&(this.__firstRender||this.emit("change",this.value,n),e||this.history.push(this.stack,this.range)),this.__firstRender&&(this.__firstRender=!1),this.emit("afterRender")}rangeRender(){if(this.disabled)return;const e=e=>{let t=null,n=null;if(e.element.isText())t=e.element._elm.childNodes[0],n=e.offset;else{t=e.element.parent._elm;const r=e.element.parent.children.findIndex((t=>e.element.isEqual(t)));n=e.offset+r}return{node:t,offset:n}};this.__innerSelectionChange=!0;const t=e(this.range.anchor),n=e(this.range.focus),r=window.getSelection();r.removeAllRanges();const i=document.createRange();i.setStart(t.node,t.offset),i.setEnd(n.node,n.offset),r.addRange(i),setTimeout((()=>{this.__setRangeInVisible(),this.__innerSelectionChange=!1,this.emit("rangeUpdate",this.range)}),0)}parseHtml(e){if(!e)throw new Error("You need to give an html content to convert");const t=document.createElement("div");t.innerHTML=e;let n=[];return Array.from(t.childNodes).forEach((e=>{if(1==e.nodeType||3==e.nodeType){const t=this.parseNode(e);n.push(t)}})),n}parseNode(e){if(!(e instanceof Node))throw new Error("The argument must be an node");if(1!=e.nodeType&&3!=e.nodeType)throw new Error("The argument must be an element node or text node");if(3==e.nodeType)return new E("text",null,null,null,e.textContent);const t=b.getAttributes(e),n=b.getStyles(e),r=e.nodeName.toLocaleLowerCase(),i=x.block.find((e=>e.parsedom==r)),s=x.inblock.find((e=>e.parsedom==r)),o=x.inline.find((e=>e.parsedom==r)),a=x.closed.find((e=>e.parsedom==r));let l=null,c={type:"inblock",parsedom:r,marks:t,styles:n,behavior:"default"};return i?(c.type="block",i.parse&&(c.parsedom=E.BLOCK_NODE)):s?(c.type="inblock",s.block&&(c.behavior="block")):o?(c.type="inline",o.parse&&(c.parsedom=E.TEXT_NODE,p.common.isObject(o.parse)&&Object.assign(c.styles,b.clone(o.parse)))):a?c.type="closed":(c.type="inline",c.parsedom="span"),l=new E(c.type,c.parsedom,c.marks,c.styles,null),l.behavior=c.behavior,(i||s||o)&&Array.from(e.childNodes).forEach((e=>{if(1==e.nodeType||3==e.nodeType){const t=this.parseNode(e);t.parent=l,l.hasChildren()?l.children.push(t):l.children=[t]}})),l}mergeBlockElement(e,t){if(!E.isElement(e))throw new Error("The first argument must be an AlexElement instance");if(!E.isElement(t))throw new Error("The second argument must be an AlexElement instance");if(!e.isBlock()&&!e.isInblock()||!t.isBlock()&&!t.isInblock())throw new Error('Elements that are not "block" or "inblock" cannot be merged');t.children.push(...e.children),t.children.forEach((e=>{e.parent=t})),e.children=null}getElementByKey(e){if(!e)throw new Error("You need to specify a key to do the query");const t=n=>{let r=null,i=0,s=n.length;for(;i<s;){if(n[i].key==e){r=n[i];break}if(n[i].hasChildren()){const e=t(n[i].children);if(e){r=e;break}}i++}return r};return t(this.stack)}getPreviousElement(e){if(!E.isElement(e))throw new Error("The argument must be an AlexElement instance");if(e.isBlock()){const t=this.stack.findIndex((t=>e.isEqual(t)));return t<=0?null:this.stack[t-1].isEmpty()?this.getPreviousElement(this.stack[t-1]):this.stack[t-1]}{const t=e.parent.children.findIndex((t=>e.isEqual(t)));return t<=0?null:e.parent.children[t-1].isEmpty()?this.getPreviousElement(e.parent.children[t-1]):e.parent.children[t-1]}}getNextElement(e){if(!E.isElement(e))throw new Error("The argument must be an AlexElement instance");if(e.isBlock()){const t=this.stack.findIndex((t=>e.isEqual(t)));return t>=this.stack.length-1?null:this.stack[t+1].isEmpty()?this.getNextElement(this.stack[t+1]):this.stack[t+1]}{const t=e.parent.children.findIndex((t=>e.isEqual(t)));return t>=e.parent.children.length-1?null:e.parent.children[t+1].isEmpty()?this.getNextElement(e.parent.children[t+1]):e.parent.children[t+1]}}getPreviousElementOfPoint(e){if(!w.isPoint(e))throw new Error("The argument must be an AlexPoint instance");const t=E.flatElements(this.stack),n=e=>{const r=t.findIndex((t=>e.isEqual(t)));if(r<=0)return null;let i=t[r-1];return!i.isText()&&!i.isClosed()||i.isEmpty()?n(i):i};return n(e.element)}getNextElementOfPoint(e){if(!w.isPoint(e))throw new Error("The argument must be an AlexPoint instance");const t=E.flatElements(this.stack),n=e=>{const r=t.findIndex((t=>e.isEqual(t)));if(r==t.length-1)return null;let i=t[r+1];return!i.isText()&&!i.isClosed()||i.isEmpty()?n(i):i};return n(e.element)}getElementsByRange(e=!1,t=!1){if(this.range.anchor.isEqual(this.range.focus))return[];if(this.range.anchor.element.isEqual(this.range.focus.element)){if(e){const e=0==this.range.anchor.offset&&this.range.focus.offset==(this.range.anchor.element.isText()?this.range.anchor.element.textContent.length:1);return[{element:this.range.anchor.element,offset:!e&&[this.range.anchor.offset,this.range.focus.offset]}]}return[]}let n=[];e&&(0==this.range.anchor.offset?n.push({element:this.range.anchor.element,offset:!1}):this.range.anchor.offset<(this.range.anchor.element.isText()?this.range.anchor.element.textContent.length:1)&&n.push({element:this.range.anchor.element,offset:[this.range.anchor.offset,this.range.anchor.element.isText()?this.range.anchor.element.textContent.length:1]}));const r=E.flatElements(this.stack),i=r.findIndex((e=>e.isEqual(this.range.anchor.element))),s=r.findIndex((e=>e.isEqual(this.range.focus.element)));for(let d=i+1;d<s;d++)n.push({element:r[d],offset:!1});e&&(this.range.focus.offset==(this.range.focus.element.isText()?this.range.focus.element.textContent.length:1)?n.push({element:this.range.focus.element,offset:!1}):this.range.focus.offset>0&&n.push({element:this.range.focus.element,offset:[0,this.range.focus.offset]}));const o=n.length;let a=[];for(let d=o-1;d>=0;d--)if(n[d].element.hasChildren()){n[d].element.children.every((e=>a.some((t=>t.element.isEqual(e)&&!t.offset))))&&a.unshift(n[d])}else a.unshift(n[d]);if(t)return a;let l=[];const c=a.length;for(let d=0;d<c;d++)if(a[d].element.isBlock())l.push(a[d]);else{a.some((e=>e.element.isEqual(a[d].element.parent)))||l.push(a[d])}return l}splitElementsByRange(e=!1,t=!1){const n=this.getElementsByRange(e,t);let r=[];return n.forEach(((e,t)=>{if(e.offset){let i=null;if(0==e.offset[0]){const t=e.element.clone();e.element.textContent=e.element.textContent.substring(0,e.offset[1]),t.textContent=t.textContent.substring(e.offset[1]),this.addElementAfter(t,e.element),i=e.element}else if(e.offset[1]==e.element.textContent.length){const t=e.element.clone();e.element.textContent=e.element.textContent.substring(0,e.offset[0]),t.textContent=t.textContent.substring(e.offset[0]),this.addElementAfter(t,e.element),i=t}else{const t=e.element.clone(),n=e.element.clone();e.element.textContent=e.element.textContent.substring(0,e.offset[0]),t.textContent=t.textContent.substring(e.offset[0],e.offset[1]),n.textContent=n.textContent.substring(e.offset[1]),this.addElementAfter(t,e.element),this.addElementAfter(n,t),i=t}0==t&&this.range.anchor.moveToStart(i),t==n.length-1&&this.range.focus.moveToEnd(i),r.push(i)}else r.push(e.element)})),r}addElementTo(e,t,n=0){if(!E.isElement(e))throw new Error("The first argument must be an AlexElement instance");if(!E.isElement(t))throw new Error("The second argument must be an AlexElement instance");if("number"!=typeof n||isNaN(n)||n<0)throw new Error("The third argument must be an integer not less than 0");t.hasChildren()?n>=t.children.length?t.children.push(e):t.children.splice(n,0,e):t.children=[e],e.parent=t}addElementBefore(e,t){if(!E.isElement(e))throw new Error("The first argument must be an AlexElement instance");if(!E.isElement(t))throw new Error("The second argument must be an AlexElement instance");if(t.isBlock()){const n=this.stack.findIndex((e=>t.isEqual(e)));this.stack.splice(n,0,e),e.parent=null}else{const n=t.parent.children.findIndex((e=>t.isEqual(e)));this.addElementTo(e,t.parent,n)}}addElementAfter(e,t){if(!E.isElement(e))throw new Error("The first argument must be an AlexElement instance");if(!E.isElement(t))throw new Error("The second argument must be an AlexElement instance");if(t.isBlock()){const n=this.stack.findIndex((e=>t.isEqual(e)));n>=this.stack.length-1?this.stack.push(e):this.stack.splice(n+1,0,e),e.parent=null}else{const n=t.parent.children.findIndex((e=>t.isEqual(e)));this.addElementTo(e,t.parent,n+1)}}collapseToStart(e){if(!this.disabled)if(E.isElement(e))this.range.anchor.moveToStart(e),this.range.focus.moveToStart(e);else{const e=E.flatElements(this.stack);this.range.anchor.moveToStart(e[0]),this.range.focus.moveToStart(e[0])}}collapseToEnd(e){if(!this.disabled)if(E.isElement(e))this.range.anchor.moveToEnd(e),this.range.focus.moveToEnd(e);else{const e=E.flatElements(this.stack),t=e.length;this.range.anchor.moveToEnd(e[t-1]),this.range.focus.moveToEnd(e[t-1])}}setDisabled(){this.disabled=!0,this.$el.removeAttribute("contenteditable")}setEnabled(){this.disabled=!1,this.$el.setAttribute("contenteditable",!0)}setTextStyle(e){if(!this.disabled){if(!p.common.isObject(e))throw new Error("The argument must be an object");if(this.range.anchor.isEqual(this.range.focus))if(this.range.anchor.element.isSpaceText())this.range.anchor.element.hasStyles()?Object.assign(this.range.anchor.element.styles,b.clone(e)):this.range.anchor.element.styles=b.clone(e);else if(this.range.anchor.element.isText()){const t=E.getSpaceElement();t.styles=b.clone(this.range.anchor.element.styles),t.marks=b.clone(this.range.anchor.element.marks),t.hasStyles()?Object.assign(t.styles,b.clone(e)):t.styles=b.clone(e),this.insertElement(t)}else{const t=E.getSpaceElement();t.styles=b.clone(e),this.insertElement(t)}else{this.splitElementsByRange(!0,!0).forEach((t=>{t.isText()&&(t.hasStyles()?Object.assign(t.styles,b.clone(e)):t.styles=b.clone(e))}))}}}removeTextStyle(e){if(this.disabled)return;const t=t=>{if(Array.isArray(e)){if(t.hasStyles()){let n={};Object.keys(t.styles).forEach((r=>{e.includes(r)||(n[r]=t.styles[r])})),t.styles=n}}else t.styles=null};if(this.range.anchor.isEqual(this.range.focus)){if(this.range.anchor.element.isSpaceText())t(this.range.anchor.element);else if(this.range.anchor.element.isText()){const e=E.getSpaceElement();e.styles=b.clone(this.range.anchor.element.styles),e.marks=b.clone(this.range.anchor.element.marks),t(e),this.insertElement(e)}}else{this.splitElementsByRange(!0,!0).forEach((e=>{e.isText()&&t(e)}))}}queryTextStyle(e,t){if(!e)throw new Error("The first argument cannot be null");if(this.range.anchor.isEqual(this.range.focus))return!(!this.range.anchor.element.isText()||!this.range.anchor.element.hasStyles())&&(null==t||null==t?this.range.anchor.element.styles.hasOwnProperty(e):this.range.anchor.element.styles[e]==t);const n=this.getElementsByRange(!0,!0).filter((e=>e.element.isText()));if(0==n.length)return!1;return n.every((n=>!!n.element.hasStyles()&&(null==t||null==t?n.element.styles.hasOwnProperty(e):n.element.styles[e]==t)))}setTextMark(e){if(!this.disabled){if(!p.common.isObject(e))throw new Error("The argument must be an object");if(this.range.anchor.isEqual(this.range.focus))if(this.range.anchor.element.isSpaceText())this.range.anchor.element.hasMarks()?Object.assign(this.range.anchor.element.marks,b.clone(e)):this.range.anchor.element.marks=b.clone(e);else if(this.range.anchor.element.isText()){const t=E.getSpaceElement();t.styles=b.clone(this.range.anchor.element.styles),t.marks=b.clone(this.range.anchor.element.marks),t.hasMarks()?Object.assign(t.marks,b.clone(e)):t.marks=b.clone(e),this.insertElement(t)}else{const t=E.getSpaceElement();t.marks=b.clone(e),this.insertElement(t)}else{this.splitElementsByRange(!0,!0).forEach((t=>{t.isText()&&(t.hasMarks()?Object.assign(t.marks,b.clone(e)):t.marks=b.clone(e))}))}}}removeTextMark(e){if(this.disabled)return;const t=t=>{if(Array.isArray(e)){if(t.hasMarks()){let n={};Object.keys(t.marks).forEach((r=>{e.includes(r)||(n[r]=t.marks[r])})),t.marks=n}}else t.marks=null};if(this.range.anchor.isEqual(this.range.focus)){if(this.range.anchor.element.isSpaceText())t(this.range.anchor.element);else if(this.range.anchor.element.isText()){const e=E.getSpaceElement();e.styles=b.clone(this.range.anchor.element.styles),e.marks=b.clone(this.range.anchor.element.marks),t(e),this.insertElement(e)}}else{this.splitElementsByRange(!0,!0).forEach((e=>{e.isText()&&t(e)}))}}queryTextMark(e,t){if(!e)throw new Error("The first argument cannot be null");if(this.range.anchor.isEqual(this.range.focus))return!(!this.range.anchor.element.isText()||!this.range.anchor.element.hasMarks())&&(null==t||null==t?this.range.anchor.element.marks.hasOwnProperty(e):this.range.anchor.element.marks[e]==t);const n=this.getElementsByRange(!0,!0).filter((e=>e.element.isText()));if(0==n.length)return!1;return n.every((n=>!!n.element.hasMarks()&&(null==t||null==t?n.element.marks.hasOwnProperty(e):n.element.marks[e]==t)))}emit(e,...t){return!!Array.isArray(this.__events[e])&&(this.__events[e].forEach((e=>{e.apply(this,[...t])})),!0)}on(e,t){this.__events[e]||(this.__events[e]=[]),this.__events[e].push(t)}destroy(){this.setDisabled(),p.event.off(document,`selectionchange.alex_editor_${this.__guid}`),p.event.off(this.$el,"beforeinput.alex_editor compositionstart.alex_editor compositionupdate.alex_editor compositionend.alex_editor keydown.alex_editor cut.alex_editor paste.alex_editor copy.alex_editor dragstart.alex_editor drop.alex_editor focus.alex_editor blur.alex_editor")}}const C={formatNumber(e){return this.isNumber(e)?e.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"):e},isNumber:e=>"number"==typeof e&&!isNaN(e),add:(...e)=>e.reduce(((e,t)=>{let n=0,r=0,i=0;try{n=e.toString().split(".")[1].length}catch(s){}try{r=t.toString().split(".")[1].length}catch(s){}return i=Math.pow(10,Math.max(n,r)),(e*i+t*i)/i})),subtract:(...e)=>e.reduce(((e,t)=>{let n=0,r=0,i=0;try{n=e.toString().split(".")[1].length}catch(s){}try{r=t.toString().split(".")[1].length}catch(s){}return i=Math.pow(10,Math.max(n,r)),(e*i-t*i)/i})),mutiply:(...e)=>e.reduce(((e,t)=>{let n=0,r=e.toString(),i=t.toString();try{n+=r.split(".")[1].length}catch(s){}try{n+=i.split(".")[1].length}catch(s){}return Number(r.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,n)})),divide:(...e)=>e.reduce(((e,t)=>{let n=0,r=0,i=e.toString(),s=t.toString();try{n=i.split(".")[1].length}catch(o){}try{r=s.split(".")[1].length}catch(o){}return i=Number(i.replace(".","")),s=Number(s.replace(".","")),i/s*Math.pow(10,r-n)}))},N={insert(e,t,n){if(!e||"string"!=typeof e)throw new TypeError("The first argument must be a string");if("string"!=typeof t)throw new TypeError("The second argument must be a string");if(!C.isNumber(n))throw new TypeError("The third argument must be a number");if(n<0)throw new Error("The third argument cannot be less than 0");return e.substring(0,n)+t+e.substring(n,e.length)},delete(e,t,n){if(!e||"string"!=typeof e)throw new TypeError("The first argument must be a string");if(!C.isNumber(t))throw new TypeError("The second argument must be a number");if(t<0)throw new Error("The second argument cannot be less than 0");if(!C.isNumber(n))throw new TypeError("The third argument must be a number");if(n<0)throw new Error("The third argument cannot be less than 0");return e.substring(0,t)+e.substring(t+n,e.length)},replace(e,t,n,r){if(!e||"string"!=typeof e)throw new TypeError("The first argument must be a string");if(!C.isNumber(t))throw new TypeError("The second argument must be a number");if(t<0)throw new Error("The second argument cannot be less than 0");if(!C.isNumber(n))throw new TypeError("The third argument must be a number");if(n<0)throw new Error("The third argument cannot be less than 0");if("string"!=typeof r)throw new TypeError("The fourth argument must be a string");return e.substring(0,t)+r+e.substring(n,e.length)},trim(e,t){if("string"!=typeof e)throw new TypeError("The first argument must be a string");let n=e.replace(/(^\s+)|(\s+$)/g,"");return t&&(n=n.replace(/\s/g,"")),n}},O={isWindow:e=>e&&e instanceof Window,getElementPoint(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(this.isElement(t)||(t=document.body),!this.isContains(t,e))throw new Error("The second argument and the first argument have no hierarchical relationship");let n=e,r=0,i=0;for(;this.isElement(e)&&this.isContains(t,e)&&t!==e;)r+=e.offsetTop,i+=e.offsetLeft,e=e.offsetParent;return{top:r,left:i,right:t.offsetWidth-i-n.offsetWidth,bottom:t.offsetHeight-r-n.offsetHeight}},isContains(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(!this.isElement(t))throw new TypeError("The second argument must be an element");return e===t||(e.contains?e.contains(t):e.compareDocumentPosition?!!(16&e.compareDocumentPosition(t)):void 0)},isParentNode(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(!this.isElement(t))throw new TypeError("The second argument must be an element");return e!==t&&t.parentNode===e},children(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(t&&"string"!=typeof t)throw new TypeError("The second argument must be a string");return[...e.querySelectorAll(t||"*")].filter((t=>t.parentNode===e))},siblings(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(t&&"string"!=typeof t)throw new TypeError("The second argument must be a string");if(!e.parentNode)return[];return[...e.parentNode.querySelectorAll(t||"*")].filter((t=>t.parentNode===e.parentNode&&t!=e))},rem2px(e){if(!C.isNumber(e))throw new TypeError("The argument must be a number");let t=this.getCssStyle(document.documentElement,"font-size");return C.mutiply(e,parseFloat(t))},px2rem(e){if(!C.isNumber(e))throw new TypeError("The argument must be a number");let t=this.getCssStyle(document.documentElement,"font-size");return C.divide(e,parseFloat(t))},width(e){"string"==typeof e&&e&&(e=document.body.querySelector(e)),this.isElement(e)||(e=document.body);let t=e.clientWidth,n=parseFloat(this.getCssStyle(e,"padding-left")),r=parseFloat(this.getCssStyle(e,"padding-right"));return C.subtract(t,n,r)},height(e){"string"==typeof e&&e&&(e=document.body.querySelector(e)),this.isElement(e)||(e=document.body);let t=e.clientHeight,n=parseFloat(this.getCssStyle(e,"padding-top")),r=parseFloat(this.getCssStyle(e,"padding-bottom"));return C.subtract(t,n,r)},removeClass(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(!t||"string"!=typeof t)throw new TypeError("The second argument must be a string");let n=e.classList;N.trim(t).split(/\s+/).forEach((e=>{n.remove(e)}))},addClass(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(!t||"string"!=typeof t)throw new TypeError("The second argument must be a string");let n=e.classList;N.trim(t).split(/\s+/).forEach((e=>{n.add(e)}))},hasClass(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(!t||"string"!=typeof t)throw new TypeError("The second argument must be a string");let n=e.classList;return N.trim(t).split(/\s+/).every((e=>n.contains(e)))},scrollTopBottomTrigger(e,t){"string"==typeof e&&e&&(e=document.body.querySelector(e));let n=window;this.isElement(e)&&e!=document.body&&e!=document.documentElement&&(n=e),"function"==typeof e&&(t=e);let r=!0;n.addEventListener("scroll",(e=>{if(this.getScrollTop(n)<=0){if(!r)return;"function"==typeof t&&(r=!1,t({state:"top",target:n}))}else{let e={state:"bottom",target:n},i=0;if(i=n==window?window.innerHeight:n.clientHeight,C.add(this.getScrollTop(n),i)+1>=this.getScrollHeight(n)&&i!=this.getScrollHeight(n)){if(!r)return;"function"==typeof t&&(r=!1,t(e))}else r=!0}}))},getScrollWidth(e){"string"==typeof e&&e&&(e=document.body.querySelector(e));let t=0;return t=this.isElement(e)&&e!=document.documentElement&&e!=document.body?e.scrollWidth:0==document.documentElement.scrollWidth||0==document.body.scrollWidth?document.documentElement.scrollWidth||document.body.scrollWidth:document.documentElement.scrollWidth>document.body.scrollWidth?document.documentElement.scrollWidth:document.body.scrollWidth,t},getScrollHeight(e){"string"==typeof e&&e&&(e=document.body.querySelector(e));let t=0;return t=this.isElement(e)&&e!=document.documentElement&&e!=document.body?e.scrollHeight:0==document.documentElement.scrollHeight||0==document.body.scrollHeight?document.documentElement.scrollHeight||document.body.scrollHeight:document.documentElement.scrollHeight>document.body.scrollHeight?document.documentElement.scrollHeight:document.body.scrollHeight,t},setScrollTop(e){let t=!1,n=e.el;"string"==typeof n&&n&&(n=document.body.querySelector(n));let r=e.number||0,i=e.time||0;return this.isElement(n)&&n!=document.body&&n!=document.documentElement&&n!=window||(t=!0),new Promise(((e,s)=>{if(i<=0)t?document.documentElement.scrollTop=document.body.scrollTop=r:n.scrollTop=r,e();else{let s=10,o=C.divide(i,s),a=this.getScrollTop(n),l=C.divide(C.subtract(r,a),o),c=setInterval((()=>{o>0?(o--,t?document.documentElement.scrollTop=document.body.scrollTop=a=C.add(a,l):n.scrollTop=a=C.add(a,l)):(clearInterval(c),e())}),s)}}))},getScrollTop(e){"string"==typeof e&&e&&(e=document.body.querySelector(e));let t=0;return t=this.isElement(e)&&e!=document.body&&e!=document.documentElement&&e!=window?e.scrollTop:0==document.documentElement.scrollTop||0==document.body.scrollTop?document.documentElement.scrollTop||document.body.scrollTop:document.documentElement.scrollTop>document.body.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,t},getScrollLeft(e){"string"==typeof e&&e&&(e=document.body.querySelector(e));let t=0;return t=this.isElement(e)&&e!=document.body&&e!=document.documentElement&&e!=window?e.scrollLeft:0==document.documentElement.scrollLeft||0==document.body.scrollLeft?document.documentElement.scrollLeft||document.body.scrollLeft:document.documentElement.scrollLeft>document.body.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,t},setScrollLeft(e){let t=!1,n=e.el;"string"==typeof n&&n&&(n=document.body.querySelector(n));let r=e.number||0,i=e.time||0;return this.isElement(n)&&n!=document.body&&n!=document.documentElement&&n!=window||(t=!0),new Promise(((e,s)=>{if(i<=0)t?document.documentElement.scrollLeft=document.body.scrollLeft=r:n.scrollLeft=r,e();else{let s=10,o=C.divide(i,s),a=this.getScrollLeft(n),l=C.divide(C.subtract(r,a),o),c=setInterval((()=>{o>0?(o--,t?document.documentElement.scrollLeft=document.body.scrollLeft=a=C.add(a,l):n.scrollLeft=a=C.add(a,l)):(clearInterval(c),e())}),s)}}))},getCssStyle(e,t){if(!this.isElement(e))throw new TypeError("The first argument must be an element");if(!t||"string"!=typeof t)throw new TypeError("The second argument must be a string");let n="";return n=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e)[t]:e.currentStyle[t],n},getCssSelector(e){if(!e||"string"!=typeof e)throw new TypeError("The argument must be a selector string");if(/^#{1}/.test(e))return{type:"id",value:e.substr(1)};if(/^\./.test(e))return{type:"class",value:e.substr(1)};if(/^\[(.+)\]$/.test(e)){let t="attribute",n="",r=N.trim(e,!0).substring(1,N.trim(e,!0).length-1).split("=");return 1==r.length&&(n=r[0]),2==r.length&&(n={attributeName:r[0],attributeValue:r[1].replace(/\'/g,"").replace(/\"/g,"")}),{type:t,value:n}}return{type:"tag",value:e}},getElementBounding(e){"string"==typeof e&&e&&(e=document.body.querySelector(e)),this.isElement(e)||(e=document.body);let t=e.getBoundingClientRect();return{top:t.top,bottom:C.subtract(document.documentElement.clientHeight||window.innerHeight,t.bottom),left:t.left,right:C.subtract(document.documentElement.clientWidth||window.innerWidth,t.right)}},isElement:e=>e&&e instanceof Node&&1===e.nodeType,string2dom(e,t="div"){if(!e||"string"!=typeof e)throw new TypeError("The argument must be an HTML string");let n=document.createElement(t);return n.innerHTML=e,1==n.children.length?n.children[0]:n.children}},A="_dap-datas",M={remove(e,t){if(!(e instanceof Document||O.isElement(e)||O.isWindow(e)))throw new TypeError("The first argument must be an element node or window or document");let n=e[A]||{};null==t||""===t?e[A]={}:(delete n[t],e[A]=n)},has(e,t){if(!(e instanceof Document||O.isElement(e)||O.isWindow(e)))throw new TypeError("The first argument must be an element node or window or document");if(null==t||""===t)throw new TypeError("The second parameter must be a unique key");return(e[A]||{}).hasOwnProperty(t)},get(e,t){if(!(e instanceof Document||O.isElement(e)||O.isWindow(e)))throw new TypeError("The first argument must be an element node or window or document");let n=e[A]||{};return null==t||""===t?n:n[t]},set(e,t,n){if(!(e instanceof Document||O.isElement(e)||O.isWindow(e)))throw new TypeError("The first argument must be an element node or window or document");if(null==t||""===t)throw new TypeError("The second parameter must be a unique key");let r=e[A]||{};r[t]=n,e[A]=r}},I={matchingText(e,t){if(!e||"string"!=typeof e)throw new TypeError("The first argument must be a string");if(!t||"string"!=typeof t)throw new TypeError("The second argument must be a string");let n=null;if("Chinese"==t&&(n=/^[\u4e00-\u9fa5]+$/),"chinese"==t&&(n=/[\u4e00-\u9fa5]/),"email"==t&&(n=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/),"username"==t&&(n=/^[a-zA-Z0-9_]{4,16}$/),"int+"==t&&(n=/^\d+$/),"int-"==t&&(n=/^-\d+$/),"int"==t&&(n=/^-?\d+$/),"pos"==t&&(n=/^\d*\.?\d+$/),"neg"==t&&(n=/^-\d*\.?\d+$/),"number"==t&&(n=/^-?\d*\.?\d+$/),"phone"==t&&(n=/^1[0-9]\d{9}$/),"idCard"==t&&(n=/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/),"url"==t&&(n=/^((https?|ftp|file):\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/),"IPv4"==t&&(n=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/),"hex"==t&&(n=/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/),"QQ"==t&&(n=/^[1-9][0-9]{4,10}$/),"weixin"==t&&(n=/^[a-zA-Z]([-_a-zA-Z0-9]{5,19})+$/),"plate"==t&&(n=/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-Z0-9]{4}[A-Z0-9挂学警港澳]{1}$/),!n)throw new Error("The second parameter is out of scope");return n.test(e)},getUrlParams(e){if(!e||"string"!=typeof e)throw new TypeError("The argument must be a string");let t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1);if(!n){let e=window.location.hash.split("?");2==e.length&&(n=e[1])}let r=n.match(t);return r?decodeURIComponent(r[2]):null},isEmptyObject(e){return!!this.isObject(e)&&0==Object.keys(e).length},equal(e,t){if(typeof e!=typeof t)return!1;if(this.isObject(e)&&this.isObject(t)){e=Object.assign({},e),t=Object.assign({},t);let n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!=r.length)return!1;let i=n.length;for(let s=0;s<i;s++){let r=n[s],i=e[r],o=t[r];if(this.isObject(i))return!!this.equal(i,o);if(i!==o)return!1}return!0}return e===t},isObject:e=>!("object"!=typeof e||!e),copyText(e){if(!e||"string"!=typeof e)throw new TypeError("No text to copy is defined");if(!navigator.clipboard)throw new Error("navigator.clipboard must be obtained in a secure environment, such as localhost, 127.0.0.1, or https, so the editor's copy, paste, and cut functions cannot be used");return navigator.clipboard.writeText(e)}},R=e=>{let t=e.split(/[\s]+/g),n=[];return t.forEach((e=>{let t=e.split("."),r={eventName:t[0]};t.length>1&&(r.guid=t[1]),n.push(r)})),n},B=(e,t,n)=>{let r=M.get(e,"dap-defined-events")||{},i=Object.keys(r),s=i.length;for(let o=0;o<s;o++){let s=i[o];r[s].type==t&&(n?s==t+"."+n&&(e.removeEventListener(r[s].type,r[s].fn,r[s].options),r[s]=void 0):(e.removeEventListener(r[s].type,r[s].fn,r[s].options),r[s]=void 0))}r=(e=>{let t={};return Object.keys(e).forEach((n=>{e[n]&&(t[n]=e[n])})),t})(r),M.set(e,"dap-defined-events",r)},L={on(e,t,n,r){if(!(e instanceof Document||O.isElement(e)||O.isWindow(e)))throw new TypeError("The first argument must be an element node or window or document");if(!t||"string"!=typeof t)throw new TypeError("The second argument must be a string");if(!n||"function"!=typeof n)throw new TypeError("The third argument must be a function");I.isObject(r)||(r={});R(t).forEach((t=>{((e,t,n,r,i)=>{let s=M.get(e,"dap-defined-events")||{};n||(n=M.get(e,"dap-event-guid")||0,M.set(e,"dap-event-guid",n+1)),s[n=t+"."+n]&&s[n].type==t&&e.removeEventListener(t,s[n].fn,s[n].options),e.addEventListener(t,r,i),s[n]={type:t,fn:r,options:i},M.set(e,"dap-defined-events",s)})(e,t.eventName,t.guid,n.bind(e),r)}))},off(e,t){if(!(e instanceof Document||O.isElement(e)||O.isWindow(e)))throw new TypeError("The first argument must be an element node or window or document");let n=M.get(e,"dap-defined-events");if(!n)return;if(!t){let t=Object.keys(n),r=t.length;for(let i=0;i<r;i++){let r=t[i];e.removeEventListener(n[r].type,n[r].fn,n[r].options)}return M.remove(e,"dap-defined-events"),void M.remove(e,"dap-event-guid")}R(t).forEach((t=>{B(e,t.eventName,t.guid)}))},get(e){if(!(e instanceof Document||O.isElement(e)||O.isWindow(e)))throw new TypeError("The first argument must be an element node or window or document");let t=M.get(e,"dap-defined-events");if(t)return t}},P={rgb2hsv(e){if(!Array.isArray(e)||3!=e.length)throw new TypeError("Invalid argument");let t=0,n=0,r=0,i=e[0]>=255?255:e[0],s=e[1]>=255?255:e[1],o=e[2]>=255?255:e[2];i=i<=0?0:i,s=s<=0?0:s,o=o<=0?0:o;let a=Math.max(i,s,o),l=Math.min(i,s,o);return r=a/255,n=0===a?0:1-l/a,a===l?t=0:a===i&&s>=o?t=(s-o)/(a-l)*60+0:a===i&&s<o?t=(s-o)/(a-l)*60+360:a===s?t=(o-i)/(a-l)*60+120:a===o&&(t=(i-s)/(a-l)*60+240),[t,100*n,100*r]},hsv2rgb(e){if(!Array.isArray(e)||3!=e.length)throw new TypeError("Invalid argument");let t=e[0]>=360||e[0]<=0?0:e[0],n=e[1]>=100?100:e[1];n=n<=0?0:n;let r=e[2]>=100?100:e[2];r=r<=0?0:r,n/=100,r/=100;let i=0,s=0,o=0,a=parseInt(t/60%6),l=t/60-a,c=r*(1-n),d=r*(1-l*n),h=r*(1-(1-l)*n);switch(a){case 0:i=r,s=h,o=c;break;case 1:i=d,s=r,o=c;break;case 2:i=c,s=r,o=h;break;case 3:i=c,s=d,o=r;break;case 4:i=h,s=c,o=r;break;case 5:i=r,s=c,o=d}return i=parseInt(255*i),s=parseInt(255*s),o=parseInt(255*o),[i,s,o]},rgb2hex(e){if(!Array.isArray(e)||3!=e.length)throw new TypeError("Invalid argument");return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1)},hex2rgb(e){if(!e||"string"!=typeof e)throw new TypeError("The argument must be a string");let t=e.toLowerCase();if(!I.matchingText(t,"hex"))throw new TypeError("The argument must be a hexadecimal color value");if(4===t.length){let e="#";for(let n=1;n<4;n+=1)e+=t.slice(n,n+1).concat(t.slice(n,n+1));t=e}let n=[];for(let r=1;r<7;r+=2)n.push(parseInt("0x"+t.slice(r,r+2)));return n}},D={start(e,t){if(!window.SpeechSynthesisUtterance||!window.speechSynthesis)throw new Error("The current browser does not support this syntax");let n={pitch:.8,rate:1,volume:1,start:function(){},end:function(){},pause:function(){},resume:function(){},error:function(){}};I.isObject(t)||(t={}),C.isNumber(t.pitch)&&(n.pitch=t.pitch),C.isNumber(t.rate)&&(n.rate=t.rate),C.isNumber(t.volume)&&(n.volume=t.volume),"function"==typeof t.start&&(n.start=t.start),"function"==typeof t.end&&(n.end=t.end),"function"==typeof t.pause&&(n.pause=t.pause),"function"==typeof t.resume&&(n.resume=t.resume),"function"==typeof t.error&&(n.error=t.error);const r=new SpeechSynthesisUtterance;r.text=e,r.pitch=n.pitch,r.rate=n.rate,r.volume=n.volume,r.lang="zh-CN",r.onstart=t=>{n.start.apply(r,[t,{text:e,pitch:n.pitch,rate:n.rate,volume:n.volume}])},r.onend=t=>{n.end.apply(r,[t,{text:e,pitch:n.pitch,rate:n.rate,volume:n.volume}])},r.onpause=t=>{n.pause.apply(r,[t,{text:e,pitch:n.pitch,rate:n.rate,volume:n.volume}])},r.onresume=t=>{n.resume.apply(r,[t,{text:e,pitch:n.pitch,rate:n.rate,volume:n.volume}])},r.onerror=t=>{n.error.apply(r,[t,{text:e,pitch:n.pitch,rate:n.rate,volume:n.volume}])},window.speechSynthesis.speak(r)},stop(){if(!window.SpeechSynthesisUtterance||!window.speechSynthesis)throw new Error("The current browser does not support this syntax");window.speechSynthesis.cancel()},pause(){if(!window.SpeechSynthesisUtterance||!window.speechSynthesis)throw new Error("The current browser does not support this syntax");window.speechSynthesis.pause()},resume(){if(!window.SpeechSynthesisUtterance||!window.speechSynthesis)throw new Error("The current browser does not support this syntax");window.speechSynthesis.resume()}},$={number:C,data:M,element:O,event:L,common:I,color:P,file:{getImageUrl(e){if(!(e&&e instanceof File))throw new TypeError("The argument must be a File object");return window.URL.createObjectURL(e)},dataFileToBase64:e=>new Promise(((t,n)=>{e&&e instanceof File||n(new TypeError("The argument must be a File object"));let r=new FileReader;r.readAsDataURL(e),r.onloadend=()=>{let e=r.result;t(e)}})),dataBase64toFile(e,t){if(!e||"string"!=typeof e)throw new TypeError("The first argument must be a string");if(!t||"string"!=typeof t)throw new TypeError("The second argument must be a string");let n=e.split(","),r=n[0].match(/:(.*?);/)[1],i=atob(n[1]),s=i.length,o=new Uint8Array(s);for(;s--;)o[s]=i.charCodeAt(s);return new File([o],t,{type:r})}},string:N,platform:{language:()=>window.navigator.browserLanguage||window.navigator.language,device(){const e=window.navigator.userAgent;return{PC:!e.match(/AppleWebKit.*Mobile.*/),Mobile:!!e.match(/AppleWebKit.*Mobile.*/),iPhone:e.includes("iPhone"),Phone:e.includes("Android")&&/(?:Mobile)/.test(e)||e.includes("iPhone")||/(?:Windows Phone)/.test(e),iPad:e.includes("iPad"),Tablet:e.includes("iPad")||e.includes("Android")&&!/(?:Mobile)/.test(e)||e.includes("Firefox")&&/(?:Tablet)/.test(e),WindowsPhone:/(?:Windows Phone)/.test(e)}},browser(){const e=window.navigator.userAgent;return{Edge:!!e.match(/Edg\/([\d.]+)/),weixin:e.includes("MicroMessenger"),QQ:e.includes("QQ"),QQBrowser:e.includes("MQQBrowser"),UC:e.includes("UCBrowser"),Chrome:e.includes("Chrome"),Firefox:e.includes("Firefox"),sougou:e.toLocaleLowerCase().includes("se 2.x")||e.toLocaleLowerCase().includes("metasr")||e.toLocaleLowerCase().includes("sogou"),Safari:e.includes("Safari")&&!e.includes("Chrome")}},browserKernel(){const e=window.navigator.userAgent;return e.includes("Presto")?"opera":e.includes("AppleWebKit")?"webkit":e.includes("Gecko")&&!e.includes("KHTML")?"gecko":""},os(){const e=window.navigator.userAgent;return{Windows:e.includes("Windows"),Windows_CPU:e.toLocaleLowerCase().includes("win64")||e.toLocaleLowerCase().includes("wow64")?"x64":e.toLocaleLowerCase().includes("win32")||e.toLocaleLowerCase().includes("wow32")?"x32":"",Windows_Version:e.includes("Windows NT 6.1")||e.includes("Windows 7")?"Win7":e.includes("Windows NT 6.3")||e.includes("Windows NT 6.2")||e.includes("Windows NT 8")?"Win8":e.includes("Windows NT 10")||e.includes("Windows NT 6.4")?"Win10":"",Mac:e.includes("Macintosh"),Mac_Version:function(){if(e.includes("Macintosh")){const t=e.match(/Mac OS X ([^\s]+)\)/);if(t&&t[1])return t[1].split(/_|\./).join(".")}return""}(),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),ios_Version:function(){if(e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)){const t=e.match(/CPU.+OS ([^\s]+) like Mac OS X/);if(t&&t[1])return t[1].split(/_|\./).join(".")}return""}(),Android:e.includes("Android"),Android_Version:function(){const t=e.match(/Android ([^\s]+);/);return t&&t[1]?t[1].split(/_|\./).join("."):""}(),Linux:e.includes("Linux"),HarmonyOS:e.includes("HarmonyOS"),Ubuntu:e.includes("Ubuntu")}}},speech:D};function j(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function F(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach((t=>{const n=e[t],r=typeof n;"object"!==r&&"function"!==r||Object.isFrozen(n)||F(n)})),e}class z{constructor(e){void 0===e.data&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function U(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function H(e,...t){const n=Object.create(null);for(const r in e)n[r]=e[r];return t.forEach((function(e){for(const t in e)n[t]=e[t]})),n}const K=e=>!!e.scope;class q{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=U(e)}openNode(e){if(!K(e))return;const t=((e,{prefix:t})=>{if(e.startsWith("language:"))return e.replace("language:","language-");if(e.includes(".")){const n=e.split(".");return[`${t}${n.shift()}`,...n.map(((e,t)=>`${e}${"_".repeat(t+1)}`))].join(" ")}return`${t}${e}`})(e.scope,{prefix:this.classPrefix});this.span(t)}closeNode(e){K(e)&&(this.buffer+="</span>")}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const W=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class Z{constructor(){this.rootNode=W(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t=W({scope:e});this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return"string"==typeof t?e.addText(t):t.children&&(e.openNode(t),t.children.forEach((t=>this._walk(e,t))),e.closeNode(t)),e}static _collapse(e){"string"!=typeof e&&e.children&&(e.children.every((e=>"string"==typeof e))?e.children=[e.children.join("")]:e.children.forEach((e=>{Z._collapse(e)})))}}class V extends Z{constructor(e){super(),this.options=e}addText(e){""!==e&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,t){const n=e.root;t&&(n.scope=`language:${t}`),this.add(n)}toHTML(){return new q(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function G(e){return e?"string"==typeof e?e:e.source:null}function X(e){return Y("(?=",e,")")}function Q(e){return Y("(?:",e,")*")}function J(e){return Y("(?:",e,")?")}function Y(...e){return e.map((e=>G(e))).join("")}function ee(...e){const t=function(e){const t=e[e.length-1];return"object"==typeof t&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}(e);return"("+(t.capture?"":"?:")+e.map((e=>G(e))).join("|")+")"}function te(e){return new RegExp(e.toString()+"|").exec("").length-1}const ne=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function re(e,{joinWith:t}){let n=0;return e.map((e=>{n+=1;const t=n;let r=G(e),i="";for(;r.length>0;){const e=ne.exec(r);if(!e){i+=r;break}i+=r.substring(0,e.index),r=r.substring(e.index+e[0].length),"\\"===e[0][0]&&e[1]?i+="\\"+String(Number(e[1])+t):(i+=e[0],"("===e[0]&&n++)}return i})).map((e=>`(${e})`)).join(t)}const ie="[a-zA-Z]\\w*",se="[a-zA-Z_]\\w*",oe="\\b\\d+(\\.\\d+)?",ae="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",le="\\b(0b[01]+)",ce={begin:"\\\\[\\s\\S]",relevance:0},de={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[ce]},he={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[ce]},ue=function(e,t,n={}){const r=H({scope:"comment",begin:e,end:t,contains:[]},n);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const i=ee("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:Y(/[ ]+/,"(",i,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},me=ue("//","$"),ge=ue("/\\*","\\*/"),fe=ue("#","$"),pe={scope:"number",begin:oe,relevance:0},be={scope:"number",begin:ae,relevance:0},ye={scope:"number",begin:le,relevance:0},Ee={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[ce,{begin:/\[/,end:/\]/,relevance:0,contains:[ce]}]},we={scope:"title",begin:ie,relevance:0},_e={scope:"title",begin:se,relevance:0},ve={begin:"\\.\\s*"+se,relevance:0};var Te=Object.freeze({__proto__:null,APOS_STRING_MODE:de,BACKSLASH_ESCAPE:ce,BINARY_NUMBER_MODE:ye,BINARY_NUMBER_RE:le,COMMENT:ue,C_BLOCK_COMMENT_MODE:ge,C_LINE_COMMENT_MODE:me,C_NUMBER_MODE:be,C_NUMBER_RE:ae,END_SAME_AS_BEGIN:function(e){return Object.assign(e,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})},HASH_COMMENT_MODE:fe,IDENT_RE:ie,MATCH_NOTHING_RE:/\b\B/,METHOD_GUARD:ve,NUMBER_MODE:pe,NUMBER_RE:oe,PHRASAL_WORDS_MODE:{begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},QUOTE_STRING_MODE:he,REGEXP_MODE:Ee,RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=Y(t,/.*\b/,e.binary,/\b.*/)),H({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(e,t)=>{0!==e.index&&t.ignoreMatch()}},e)},TITLE_MODE:we,UNDERSCORE_IDENT_RE:se,UNDERSCORE_TITLE_MODE:_e});function ke(e,t){"."===e.input[e.index-1]&&t.ignoreMatch()}function xe(e,t){void 0!==e.className&&(e.scope=e.className,delete e.className)}function Se(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=ke,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,void 0===e.relevance&&(e.relevance=0))}function Ce(e,t){Array.isArray(e.illegal)&&(e.illegal=ee(...e.illegal))}function Ne(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function Oe(e,t){void 0===e.relevance&&(e.relevance=1)}const Ae=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach((t=>{delete e[t]})),e.keywords=n.keywords,e.begin=Y(n.beforeMatch,X(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},Me=["of","and","for","in","not","or","if","then","parent","list","value"],Ie="keyword";function Re(e,t,n=Ie){const r=Object.create(null);return"string"==typeof e?i(n,e.split(" ")):Array.isArray(e)?i(n,e):Object.keys(e).forEach((function(n){Object.assign(r,Re(e[n],t,n))})),r;function i(e,n){t&&(n=n.map((e=>e.toLowerCase()))),n.forEach((function(t){const n=t.split("|");r[n[0]]=[e,Be(n[0],n[1])]}))}}function Be(e,t){return t?Number(t):function(e){return Me.includes(e.toLowerCase())}(e)?0:1}const Le={},Pe=e=>{console.error(e)},De=(e,...t)=>{console.log(`WARN: ${e}`,...t)},$e=(e,t)=>{Le[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),Le[`${e}/${t}`]=!0)},je=new Error;function Fe(e,t,{key:n}){let r=0;const i=e[n],s={},o={};for(let a=1;a<=t.length;a++)o[a+r]=i[a],s[a+r]=!0,r+=te(t[a-1]);e[n]=o,e[n]._emit=s,e[n]._multi=!0}function ze(e){!function(e){e.scope&&"object"==typeof e.scope&&null!==e.scope&&(e.beginScope=e.scope,delete e.scope)}(e),"string"==typeof e.beginScope&&(e.beginScope={_wrap:e.beginScope}),"string"==typeof e.endScope&&(e.endScope={_wrap:e.endScope}),function(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw Pe("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),je;if("object"!=typeof e.beginScope||null===e.beginScope)throw Pe("beginScope must be object"),je;Fe(e,e.begin,{key:"beginScope"}),e.begin=re(e.begin,{joinWith:""})}}(e),function(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw Pe("skip, excludeEnd, returnEnd not compatible with endScope: {}"),je;if("object"!=typeof e.endScope||null===e.endScope)throw Pe("endScope must be object"),je;Fe(e,e.end,{key:"endScope"}),e.end=re(e.end,{joinWith:""})}}(e)}function Ue(e){function t(t,n){return new RegExp(G(t),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(n?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(e,t){t.position=this.position++,this.matchIndexes[this.matchAt]=t,this.regexes.push([t,e]),this.matchAt+=te(e)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);const e=this.regexes.map((e=>e[1]));this.matcherRe=t(re(e,{joinWith:"|"}),!0),this.lastIndex=0}exec(e){this.matcherRe.lastIndex=this.lastIndex;const t=this.matcherRe.exec(e);if(!t)return null;const n=t.findIndex(((e,t)=>t>0&&void 0!==e)),r=this.matchIndexes[n];return t.splice(0,n),Object.assign(t,r)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(e){if(this.multiRegexes[e])return this.multiRegexes[e];const t=new n;return this.rules.slice(e).forEach((([e,n])=>t.addRule(e,n))),t.compile(),this.multiRegexes[e]=t,t}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(e,t){this.rules.push([e,t]),"begin"===t.type&&this.count++}exec(e){const t=this.getMatcher(this.regexIndex);t.lastIndex=this.lastIndex;let n=t.exec(e);if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{const t=this.getMatcher(0);t.lastIndex=this.lastIndex+1,n=t.exec(e)}return n&&(this.regexIndex+=n.position+1,this.regexIndex===this.count&&this.considerAll()),n}}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=H(e.classNameAliases||{}),function n(i,s){const o=i;if(i.isCompiled)return o;[xe,Ne,ze,Ae].forEach((e=>e(i,s))),e.compilerExtensions.forEach((e=>e(i,s))),i.__beforeBegin=null,[Se,Ce,Oe].forEach((e=>e(i,s))),i.isCompiled=!0;let a=null;return"object"==typeof i.keywords&&i.keywords.$pattern&&(i.keywords=Object.assign({},i.keywords),a=i.keywords.$pattern,delete i.keywords.$pattern),a=a||/\w+/,i.keywords&&(i.keywords=Re(i.keywords,e.case_insensitive)),o.keywordPatternRe=t(a,!0),s&&(i.begin||(i.begin=/\B|\b/),o.beginRe=t(o.begin),i.end||i.endsWithParent||(i.end=/\B|\b/),i.end&&(o.endRe=t(o.end)),o.terminatorEnd=G(o.end)||"",i.endsWithParent&&s.terminatorEnd&&(o.terminatorEnd+=(i.end?"|":"")+s.terminatorEnd)),i.illegal&&(o.illegalRe=t(i.illegal)),i.contains||(i.contains=[]),i.contains=[].concat(...i.contains.map((function(e){return function(e){e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map((function(t){return H(e,{variants:null},t)})));if(e.cachedVariants)return e.cachedVariants;if(He(e))return H(e,{starts:e.starts?H(e.starts):null});if(Object.isFrozen(e))return H(e);return e}("self"===e?i:e)}))),i.contains.forEach((function(e){n(e,o)})),i.starts&&n(i.starts,s),o.matcher=function(e){const t=new r;return e.contains.forEach((e=>t.addRule(e.begin,{rule:e,type:"begin"}))),e.terminatorEnd&&t.addRule(e.terminatorEnd,{type:"end"}),e.illegal&&t.addRule(e.illegal,{type:"illegal"}),t}(o),o}(e)}function He(e){return!!e&&(e.endsWithParent||He(e.starts))}class Ke extends Error{constructor(e,t){super(e),this.name="HTMLInjectionError",this.html=t}}const qe=U,We=H,Ze=Symbol("nomatch"),Ve=function(e){const t=Object.create(null),n=Object.create(null),r=[];let i=!0;const s="Could not find the language '{}', did you forget to load/include a language module?",o={disableAutodetect:!0,name:"Plain text",contains:[]};let a={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:V};function l(e){return a.noHighlightRe.test(e)}function c(e,t,n){let r="",i="";"object"==typeof t?(r=e,n=t.ignoreIllegals,i=t.language):($e("10.7.0","highlight(lang, code, ...args) has been deprecated."),$e("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),i=e,r=t),void 0===n&&(n=!0);const s={code:r,language:i};y("before:highlight",s);const o=s.result?s.result:d(s.language,s.code,n);return o.code=s.code,y("after:highlight",o),o}function d(e,n,r,o){const l=Object.create(null);function c(){if(!x.keywords)return void C.addText(N);let e=0;x.keywordPatternRe.lastIndex=0;let t=x.keywordPatternRe.exec(N),n="";for(;t;){n+=N.substring(e,t.index);const i=v.case_insensitive?t[0].toLowerCase():t[0],s=(r=i,x.keywords[r]);if(s){const[e,r]=s;if(C.addText(n),n="",l[i]=(l[i]||0)+1,l[i]<=7&&(O+=r),e.startsWith("_"))n+=t[0];else{const n=v.classNameAliases[e]||e;m(t[0],n)}}else n+=t[0];e=x.keywordPatternRe.lastIndex,t=x.keywordPatternRe.exec(N)}var r;n+=N.substring(e),C.addText(n)}function u(){null!=x.subLanguage?function(){if(""===N)return;let e=null;if("string"==typeof x.subLanguage){if(!t[x.subLanguage])return void C.addText(N);e=d(x.subLanguage,N,!0,S[x.subLanguage]),S[x.subLanguage]=e._top}else e=h(N,x.subLanguage.length?x.subLanguage:null);x.relevance>0&&(O+=e.relevance),C.__addSublanguage(e._emitter,e.language)}():c(),N=""}function m(e,t){""!==e&&(C.startScope(t),C.addText(e),C.endScope())}function g(e,t){let n=1;const r=t.length-1;for(;n<=r;){if(!e._emit[n]){n++;continue}const r=v.classNameAliases[e[n]]||e[n],i=t[n];r?m(i,r):(N=i,c(),N=""),n++}}function p(e,t){return e.scope&&"string"==typeof e.scope&&C.openNode(v.classNameAliases[e.scope]||e.scope),e.beginScope&&(e.beginScope._wrap?(m(N,v.classNameAliases[e.beginScope._wrap]||e.beginScope._wrap),N=""):e.beginScope._multi&&(g(e.beginScope,t),N="")),x=Object.create(e,{parent:{value:x}}),x}function b(e,t,n){let r=function(e,t){const n=e&&e.exec(t);return n&&0===n.index}(e.endRe,n);if(r){if(e["on:end"]){const n=new z(e);e["on:end"](t,n),n.isMatchIgnored&&(r=!1)}if(r){for(;e.endsParent&&e.parent;)e=e.parent;return e}}if(e.endsWithParent)return b(e.parent,t,n)}function y(e){return 0===x.matcher.regexIndex?(N+=e[0],1):(I=!0,0)}function E(e){const t=e[0],r=n.substring(e.index),i=b(x,e,r);if(!i)return Ze;const s=x;x.endScope&&x.endScope._wrap?(u(),m(t,x.endScope._wrap)):x.endScope&&x.endScope._multi?(u(),g(x.endScope,e)):s.skip?N+=t:(s.returnEnd||s.excludeEnd||(N+=t),u(),s.excludeEnd&&(N=t));do{x.scope&&C.closeNode(),x.skip||x.subLanguage||(O+=x.relevance),x=x.parent}while(x!==i.parent);return i.starts&&p(i.starts,e),s.returnEnd?0:t.length}let w={};function _(t,s){const o=s&&s[0];if(N+=t,null==o)return u(),0;if("begin"===w.type&&"end"===s.type&&w.index===s.index&&""===o){if(N+=n.slice(s.index,s.index+1),!i){const t=new Error(`0 width match regex (${e})`);throw t.languageName=e,t.badRule=w.rule,t}return 1}if(w=s,"begin"===s.type)return function(e){const t=e[0],n=e.rule,r=new z(n),i=[n.__beforeBegin,n["on:begin"]];for(const s of i)if(s&&(s(e,r),r.isMatchIgnored))return y(t);return n.skip?N+=t:(n.excludeBegin&&(N+=t),u(),n.returnBegin||n.excludeBegin||(N=t)),p(n,e),n.returnBegin?0:t.length}(s);if("illegal"===s.type&&!r){const e=new Error('Illegal lexeme "'+o+'" for mode "'+(x.scope||"<unnamed>")+'"');throw e.mode=x,e}if("end"===s.type){const e=E(s);if(e!==Ze)return e}if("illegal"===s.type&&""===o)return 1;if(M>1e5&&M>3*s.index){throw new Error("potential infinite loop, way more iterations than matches")}return N+=o,o.length}const v=f(e);if(!v)throw Pe(s.replace("{}",e)),new Error('Unknown language: "'+e+'"');const T=Ue(v);let k="",x=o||T;const S={},C=new a.__emitter(a);!function(){const e=[];for(let t=x;t!==v;t=t.parent)t.scope&&e.unshift(t.scope);e.forEach((e=>C.openNode(e)))}();let N="",O=0,A=0,M=0,I=!1;try{if(v.__emitTokens)v.__emitTokens(n,C);else{for(x.matcher.considerAll();;){M++,I?I=!1:x.matcher.considerAll(),x.matcher.lastIndex=A;const e=x.matcher.exec(n);if(!e)break;const t=_(n.substring(A,e.index),e);A=e.index+t}_(n.substring(A))}return C.finalize(),k=C.toHTML(),{language:e,value:k,relevance:O,illegal:!1,_emitter:C,_top:x}}catch(R){if(R.message&&R.message.includes("Illegal"))return{language:e,value:qe(n),illegal:!0,relevance:0,_illegalBy:{message:R.message,index:A,context:n.slice(A-100,A+100),mode:R.mode,resultSoFar:k},_emitter:C};if(i)return{language:e,value:qe(n),illegal:!1,relevance:0,errorRaised:R,_emitter:C,_top:x};throw R}}function h(e,n){n=n||a.languages||Object.keys(t);const r=function(e){const t={value:qe(e),illegal:!1,relevance:0,_top:o,_emitter:new a.__emitter(a)};return t._emitter.addText(e),t}(e),i=n.filter(f).filter(b).map((t=>d(t,e,!1)));i.unshift(r);const s=i.sort(((e,t)=>{if(e.relevance!==t.relevance)return t.relevance-e.relevance;if(e.language&&t.language){if(f(e.language).supersetOf===t.language)return 1;if(f(t.language).supersetOf===e.language)return-1}return 0})),[l,c]=s,h=l;return h.secondBest=c,h}function u(e){let t=null;const r=function(e){let t=e.className+" ";t+=e.parentNode?e.parentNode.className:"";const n=a.languageDetectRe.exec(t);if(n){const t=f(n[1]);return t||(De(s.replace("{}",n[1])),De("Falling back to no-highlight mode for this block.",e)),t?n[1]:"no-highlight"}return t.split(/\s+/).find((e=>l(e)||f(e)))}(e);if(l(r))return;if(y("before:highlightElement",{el:e,language:r}),e.dataset.highlighted)return void console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",e);if(e.children.length>0&&(a.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(e)),a.throwUnescapedHTML)){throw new Ke("One of your code blocks includes unescaped HTML.",e.innerHTML)}t=e;const i=t.textContent,o=r?c(i,{language:r,ignoreIllegals:!0}):h(i);e.innerHTML=o.value,e.dataset.highlighted="yes",function(e,t,r){const i=t&&n[t]||r;e.classList.add("hljs"),e.classList.add(`language-${i}`)}(e,r,o.language),e.result={language:o.language,re:o.relevance,relevance:o.relevance},o.secondBest&&(e.secondBest={language:o.secondBest.language,relevance:o.secondBest.relevance}),y("after:highlightElement",{el:e,result:o,text:i})}let m=!1;function g(){if("loading"===document.readyState)return void(m=!0);document.querySelectorAll(a.cssSelector).forEach(u)}function f(e){return e=(e||"").toLowerCase(),t[e]||t[n[e]]}function p(e,{languageName:t}){"string"==typeof e&&(e=[e]),e.forEach((e=>{n[e.toLowerCase()]=t}))}function b(e){const t=f(e);return t&&!t.disableAutodetect}function y(e,t){const n=e;r.forEach((function(e){e[n]&&e[n](t)}))}"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",(function(){m&&g()}),!1),Object.assign(e,{highlight:c,highlightAuto:h,highlightAll:g,highlightElement:u,highlightBlock:function(e){return $e("10.7.0","highlightBlock will be removed entirely in v12.0"),$e("10.7.0","Please use highlightElement now."),u(e)},configure:function(e){a=We(a,e)},initHighlighting:()=>{g(),$e("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")},initHighlightingOnLoad:function(){g(),$e("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")},registerLanguage:function(n,r){let s=null;try{s=r(e)}catch(a){if(Pe("Language definition for '{}' could not be registered.".replace("{}",n)),!i)throw a;Pe(a),s=o}s.name||(s.name=n),t[n]=s,s.rawDefinition=r.bind(null,e),s.aliases&&p(s.aliases,{languageName:n})},unregisterLanguage:function(e){delete t[e];for(const t of Object.keys(n))n[t]===e&&delete n[t]},listLanguages:function(){return Object.keys(t)},getLanguage:f,registerAliases:p,autoDetection:b,inherit:We,addPlugin:function(e){!function(e){e["before:highlightBlock"]&&!e["before:highlightElement"]&&(e["before:highlightElement"]=t=>{e["before:highlightBlock"](Object.assign({block:t.el},t))}),e["after:highlightBlock"]&&!e["after:highlightElement"]&&(e["after:highlightElement"]=t=>{e["after:highlightBlock"](Object.assign({block:t.el},t))})}(e),r.push(e)},removePlugin:function(e){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}),e.debugMode=function(){i=!1},e.safeMode=function(){i=!0},e.versionString="11.9.0",e.regex={concat:Y,lookahead:X,either:ee,optional:J,anyNumberOfTimes:Q};for(const E in Te)"object"==typeof Te[E]&&F(Te[E]);return Object.assign(e,Te),e},Ge=Ve({});Ge.newInstance=()=>Ve({});var Xe=Ge;Ge.HighlightJS=Ge,Ge.default=Ge;const Qe=j(Xe);const Je="[A-Za-z$_][0-9A-Za-z$_]*",Ye=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],et=["true","false","null","undefined","NaN","Infinity"],tt=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],nt=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],rt=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],it=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],st=[].concat(rt,tt,nt);var ot="[0-9](_*[0-9])*",at=`\\.(${ot})`,lt="[0-9a-fA-F](_*[0-9a-fA-F])*",ct={className:"number",variants:[{begin:`(\\b(${ot})((${at})|\\.)?|(${at}))[eE][+-]?(${ot})[fFdD]?\\b`},{begin:`\\b(${ot})((${at})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${at})[fFdD]?\\b`},{begin:`\\b(${ot})[fFdD]\\b`},{begin:`\\b0[xX]((${lt})\\.?|(${lt})?\\.(${lt}))[pP][+-]?(${ot})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${lt})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function dt(e,t,n){return-1===n?"":e.replace(t,(r=>dt(e,t,n-1)))}const ht="[A-Za-z$_][0-9A-Za-z$_]*",ut=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],mt=["true","false","null","undefined","NaN","Infinity"],gt=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ft=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],pt=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],bt=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],yt=[].concat(pt,gt,ft);const Et=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],wt=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],_t=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],vt=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],Tt=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();const kt=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],xt=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],St=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],Ct=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],Nt=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse(),Ot=St.concat(Ct);const At=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Mt=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],It=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],Rt=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],Bt=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function Lt(e){return e?"string"==typeof e?e:e.source:null}function Pt(e){return Dt("(?=",e,")")}function Dt(...e){return e.map((e=>Lt(e))).join("")}function $t(...e){const t=function(e){const t=e[e.length-1];return"object"==typeof t&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}(e);return"("+(t.capture?"":"?:")+e.map((e=>Lt(e))).join("|")+")"}const jt=e=>Dt(/\b/,e,/\w$/.test(e)?/\b/:/\B/),Ft=["Protocol","Type"].map(jt),zt=["init","self"].map(jt),Ut=["Any","Self"],Ht=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],Kt=["false","nil","true"],qt=["assignment","associativity","higherThan","left","lowerThan","none","right"],Wt=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],Zt=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],Vt=$t(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),Gt=$t(Vt,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),Xt=Dt(Vt,Gt,"*"),Qt=$t(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),Jt=$t(Qt,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),Yt=Dt(Qt,Jt,"*"),en=Dt(/[A-Z]/,Jt,"*"),tn=["attached","autoclosure",Dt(/convention\(/,$t("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",Dt(/objc\(/,Yt,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],nn=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];Qe.registerLanguage("plaintext",(function(e){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}})),Qe.registerLanguage("javascript",(function(e){const t=e.regex,n=Je,r="<>",i="</>",s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(e,t)=>{const n=e[0].length+e.index,r=e.input[n];if("<"===r||","===r)return void t.ignoreMatch();let i;">"===r&&(((e,{after:t})=>{const n="</"+e[0].slice(1);return-1!==e.input.indexOf(n,t)})(e,{after:n})||t.ignoreMatch());const s=e.input.substring(n);((i=s.match(/^\s*=/))||(i=s.match(/^\s+extends\s+/))&&0===i.index)&&t.ignoreMatch()}},o={$pattern:Je,keyword:Ye,literal:et,built_in:st,"variable.language":it},a="[0-9](_?[0-9])*",l=`\\.(${a})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${c})((${l})|\\.)?|(${l}))[eE][+-]?(${a})\\b`},{begin:`\\b(${c})\\b((${l})\\b|\\.)?|(${l})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},h={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},u={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"xml"}},m={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"css"}},g={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"graphql"}},f={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,h]},p={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},b=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,u,m,g,f,{match:/\$\d+/},d];h.contains=b.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(b)});const y=[].concat(p,h.contains),E=y.concat([{begin:/\(/,end:/\)/,keywords:o,contains:["self"].concat(y)}]),w={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:E},_={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},v={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...tt,...nt]}},T={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[w],illegal:/%/},k={match:t.concat(/\b/,(x=[...rt,"super","import"],t.concat("(?!",x.join("|"),")")),n,t.lookahead(/\(/)),className:"title.function",relevance:0};var x;const S={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},C={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},w]},N="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",O={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(N)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[w]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:E,CLASS_REFERENCE:v},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,u,m,g,f,p,{match:/\$\d+/},d,v,{className:"attr",begin:n+t.lookahead(":"),relevance:0},O,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[p,e.REGEXP_MODE,{className:"function",begin:N,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:E}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:r,end:i},{match:/<[A-Za-z0-9\\._:-]+\s*\/>/},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},T,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[w,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},S,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[w]},k,{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},_,C,{match:/\$[(.]/}]}})),Qe.registerLanguage("java",(function(e){const t=e.regex,n="[À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*",r=n+dt("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),i={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},s={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},o={className:"params",begin:/\(/,end:/\)/,keywords:i,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:i,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[o,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:i,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:i,relevance:0,contains:[s,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,ct,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},ct,s]}})),Qe.registerLanguage("typescript",(function(e){const t=function(e){const t=e.regex,n=ht,r="<>",i="</>",s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(e,t)=>{const n=e[0].length+e.index,r=e.input[n];if("<"===r||","===r)return void t.ignoreMatch();let i;">"===r&&(((e,{after:t})=>{const n="</"+e[0].slice(1);return-1!==e.input.indexOf(n,t)})(e,{after:n})||t.ignoreMatch());const s=e.input.substring(n);((i=s.match(/^\s*=/))||(i=s.match(/^\s+extends\s+/))&&0===i.index)&&t.ignoreMatch()}},o={$pattern:ht,keyword:ut,literal:mt,built_in:yt,"variable.language":bt},a="[0-9](_?[0-9])*",l=`\\.(${a})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${c})((${l})|\\.)?|(${l}))[eE][+-]?(${a})\\b`},{begin:`\\b(${c})\\b((${l})\\b|\\.)?|(${l})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},h={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},u={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"xml"}},m={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"css"}},g={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"graphql"}},f={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,h]},p={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},b=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,u,m,g,f,{match:/\$\d+/},d];h.contains=b.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(b)});const y=[].concat(p,h.contains),E=y.concat([{begin:/\(/,end:/\)/,keywords:o,contains:["self"].concat(y)}]),w={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:E},_={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},v={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...gt,...ft]}},T={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[w],illegal:/%/},k={match:t.concat(/\b/,(x=[...pt,"super","import"],t.concat("(?!",x.join("|"),")")),n,t.lookahead(/\(/)),className:"title.function",relevance:0};var x;const S={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},C={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},w]},N="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",O={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(N)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[w]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:E,CLASS_REFERENCE:v},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,u,m,g,f,p,{match:/\$\d+/},d,v,{className:"attr",begin:n+t.lookahead(":"),relevance:0},O,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[p,e.REGEXP_MODE,{className:"function",begin:N,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:E}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:r,end:i},{match:/<[A-Za-z0-9\\._:-]+\s*\/>/},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},T,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[w,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},S,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[w]},k,{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},_,C,{match:/\$[(.]/}]}}(e),n=ht,r=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],i={beginKeywords:"namespace",end:/\{/,excludeEnd:!0,contains:[t.exports.CLASS_REFERENCE]},s={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:r},contains:[t.exports.CLASS_REFERENCE]},o={$pattern:ht,keyword:ut.concat(["type","namespace","interface","public","private","protected","implements","declare","abstract","readonly","enum","override"]),literal:mt,built_in:yt.concat(r),"variable.language":bt},a={className:"meta",begin:"@"+n},l=(e,t,n)=>{const r=e.contains.findIndex((e=>e.label===t));if(-1===r)throw new Error("can not find mode to replace");e.contains.splice(r,1,n)};return Object.assign(t.keywords,o),t.exports.PARAMS_CONTAINS.push(a),t.contains=t.contains.concat([a,i,s]),l(t,"shebang",e.SHEBANG()),l(t,"use_strict",{className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/}),t.contains.find((e=>"func.def"===e.label)).relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),t})),Qe.registerLanguage("html",(function(e){const t=e.regex,n=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},i={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},s=e.inherit(i,{begin:/\(/,end:/\)/}),o=e.inherit(e.APOS_STRING_MODE,{className:"string"}),a=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),l={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:/[\p{L}0-9._:-]+/u,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[r]},{begin:/'/,end:/'/,contains:[r]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[i,a,o,s,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[i,s,a,o]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},r,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[a]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[l],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[l],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:l}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}})),Qe.registerLanguage("markdown",(function(e){const t={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},n={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.regex.concat(/\[.+?\]\(/,/[A-Za-z][A-Za-z0-9+.-]*/,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},r={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},i={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},s=e.inherit(r,{contains:[]}),o=e.inherit(i,{contains:[]});r.contains.push(o),i.contains.push(s);let a=[t,n];return[r,i,s,o].forEach((e=>{e.contains=e.contains.concat(a)})),a=a.concat(r,i),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:a},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:a}]}]},t,{className:"bullet",begin:"^[ \t]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},r,i,{className:"quote",begin:"^>\\s+",contains:a,end:"$"},{className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},n,{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}})),Qe.registerLanguage("css",(function(e){const t=e.regex,n=(e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}))(e),r=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,{begin:/-(webkit|moz|ms|o)-(?=[a-z])/},n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\.[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+_t.join("|")+")"},{begin:":(:)?("+vt.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Tt.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...r,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...r,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:/@-?\w[\w]*(-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:"and or not only",attribute:wt.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...r,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+Et.join("|")+")\\b"}]}})),Qe.registerLanguage("less",(function(e){const t=(e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}))(e),n=Ot,r="[\\w-]+",i="("+r+"|@\\{"+r+"\\})",s=[],o=[],a=function(e){return{className:"string",begin:"~?"+e+".*?"+e}},l=function(e,t,n){return{className:e,begin:t,relevance:n}},c={$pattern:/[a-z-]+/,keyword:"and or not only",attribute:xt.join(" ")},d={begin:"\\(",end:"\\)",contains:o,keywords:c,relevance:0};o.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,a("'"),a('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,d,l("variable","@@?"+r,10),l("variable","@\\{"+r+"\\}"),l("built_in","~?`[^`]*?`"),{className:"attribute",begin:r+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const h=o.concat({begin:/\{/,end:/\}/,contains:s}),u={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(o)},m={begin:i+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Nt.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:o}}]},g={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:c,returnEnd:!0,contains:o,relevance:0}},f={className:"variable",variants:[{begin:"@"+r+"\\s*:",relevance:15},{begin:"@"+r}],starts:{end:"[;}]",returnEnd:!0,contains:h}},p={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:i,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:"[<='$\"]",relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,u,l("keyword","all\\b"),l("variable","@\\{"+r+"\\}"),{begin:"\\b("+kt.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,l("selector-tag",i,0),l("selector-id","#"+i),l("selector-class","\\."+i,0),l("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+St.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+Ct.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:h},{begin:"!important"},t.FUNCTION_DISPATCH]},b={begin:r+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[p]};return s.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,g,f,b,m,p,u,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:"[=>'/<($\"]",contains:s}})),Qe.registerLanguage("scss",(function(e){const t=(e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}))(e),n=Rt,r=It,i="@[a-z-]+",s={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+At.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},s,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Bt.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,s,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:i,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:"and or not only",attribute:Mt.join(" ")},contains:[{begin:i,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},s,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}})),Qe.registerLanguage("objectivec",(function(e){const t=/[a-zA-Z@][a-zA-Z0-9_]*/,n={$pattern:t,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:{"variable.language":["this","super"],$pattern:t,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},illegal:"</",contains:[{className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+n.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:n,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}})),Qe.registerLanguage("swift",(function(e){const t={match:/\s+/,relevance:0},n=e.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[e.C_LINE_COMMENT_MODE,n],i={match:[/\./,$t(...Ft,...zt)],className:{2:"keyword"}},s={match:Dt(/\./,$t(...Ht)),relevance:0},o=Ht.filter((e=>"string"==typeof e)).concat(["_|0"]),a={variants:[{className:"keyword",match:$t(...Ht.filter((e=>"string"!=typeof e)).concat(Ut).map(jt),...zt)}]},l={$pattern:$t(/\b\w+/,/#\w+/),keyword:o.concat(Wt),literal:Kt},c=[i,s,a],d=[{match:Dt(/\./,$t(...Zt)),relevance:0},{className:"built_in",match:Dt(/\b/,$t(...Zt),/(?=\()/)}],h={match:/->/,relevance:0},u=[h,{className:"operator",relevance:0,variants:[{match:Xt},{match:`\\.(\\.|${Gt})+`}]}],m="([0-9]_*)+",g="([0-9a-fA-F]_*)+",f={className:"number",relevance:0,variants:[{match:`\\b(${m})(\\.(${m}))?([eE][+-]?(${m}))?\\b`},{match:`\\b0x(${g})(\\.(${g}))?([pP][+-]?(${m}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},p=(e="")=>({className:"subst",variants:[{match:Dt(/\\/,e,/[0\\tnr"']/)},{match:Dt(/\\/,e,/u\{[0-9a-fA-F]{1,8}\}/)}]}),b=(e="")=>({className:"subst",match:Dt(/\\/,e,/[\t ]*(?:[\r\n]|\r\n)/)}),y=(e="")=>({className:"subst",label:"interpol",begin:Dt(/\\/,e,/\(/),end:/\)/}),E=(e="")=>({begin:Dt(e,/"""/),end:Dt(/"""/,e),contains:[p(e),b(e),y(e)]}),w=(e="")=>({begin:Dt(e,/"/),end:Dt(/"/,e),contains:[p(e),y(e)]}),_={className:"string",variants:[E(),E("#"),E("##"),E("###"),w(),w("#"),w("##"),w("###")]},v=[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}],T={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:v},k=e=>{const t=Dt(e,/\//),n=Dt(/\//,e);return{begin:t,end:n,contains:[...v,{scope:"comment",begin:`#(?!.*${n})`,end:/$/}]}},x={scope:"regexp",variants:[k("###"),k("##"),k("#"),T]},S={match:Dt(/`/,Yt,/`/)},C=[S,{className:"variable",match:/\$\d+/},{className:"variable",match:`\\$${Jt}+`}],N=[{match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:nn,contains:[...u,f,_]}]}},{scope:"keyword",match:Dt(/@/,$t(...tn))},{scope:"meta",match:Dt(/@/,Yt)}],O={match:Pt(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:Dt(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,Jt,"+")},{className:"type",match:en,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:Dt(/\s+&\s+/,Pt(en)),relevance:0}]},A={begin:/</,end:/>/,keywords:l,contains:[...r,...c,...N,h,O]};O.contains.push(A);const M={begin:/\(/,end:/\)/,relevance:0,keywords:l,contains:["self",{match:Dt(Yt,/\s*:/),keywords:"_|0",relevance:0},...r,x,...c,...d,...u,f,_,...C,...N,O]},I={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,O]},R={begin:/\(/,end:/\)/,keywords:l,contains:[{begin:$t(Pt(Dt(Yt,/\s*:/)),Pt(Dt(Yt,/\s+/,Yt,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:Yt}]},...r,...c,...u,f,_,...N,O,M],endsParent:!0,illegal:/["']/},B={match:[/(func|macro)/,/\s+/,$t(S.match,Yt,Xt)],className:{1:"keyword",3:"title.function"},contains:[I,R,t],illegal:[/\[/,/%/]},L={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[I,R,t],illegal:/\[|%/},P={match:[/operator/,/\s+/,Xt],className:{1:"keyword",3:"title"}},D={begin:[/precedencegroup/,/\s+/,en],className:{1:"keyword",3:"title"},contains:[O],keywords:[...qt,...Kt],end:/}/};for(const $ of _.variants){const e=$.contains.find((e=>"interpol"===e.label));e.keywords=l;const t=[...c,...d,...u,f,_,...C];e.contains=[...t,{begin:/\(/,end:/\)/,contains:["self",...t]}]}return{name:"Swift",keywords:l,contains:[...r,B,L,{beginKeywords:"struct protocol class extension enum actor",end:"\\{",excludeEnd:!0,keywords:l,contains:[e.inherit(e.TITLE_MODE,{className:"title.class",begin:/[A-Za-z$_][\u00C0-\u02B80-9A-Za-z$_]*/}),...c]},P,D,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},x,...c,...d,...u,f,_,...C,...N,O,M]}})),Qe.registerLanguage("dart",(function(e){const t={className:"subst",variants:[{begin:"\\$[A-Za-z0-9_]+"}]},n={className:"subst",variants:[{begin:/\$\{/,end:/\}/}],keywords:"true false null this is new super"},r={className:"string",variants:[{begin:"r'''",end:"'''"},{begin:'r"""',end:'"""'},{begin:"r'",end:"'",illegal:"\\n"},{begin:'r"',end:'"',illegal:"\\n"},{begin:"'''",end:"'''",contains:[e.BACKSLASH_ESCAPE,t,n]},{begin:'"""',end:'"""',contains:[e.BACKSLASH_ESCAPE,t,n]},{begin:"'",end:"'",illegal:"\\n",contains:[e.BACKSLASH_ESCAPE,t,n]},{begin:'"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE,t,n]}]};n.contains=[e.C_NUMBER_MODE,r];const i=["Comparable","DateTime","Duration","Function","Iterable","Iterator","List","Map","Match","Object","Pattern","RegExp","Set","Stopwatch","String","StringBuffer","StringSink","Symbol","Type","Uri","bool","double","int","num","Element","ElementList"],s=i.map((e=>`${e}?`));return{name:"Dart",keywords:{keyword:["abstract","as","assert","async","await","base","break","case","catch","class","const","continue","covariant","default","deferred","do","dynamic","else","enum","export","extends","extension","external","factory","false","final","finally","for","Function","get","hide","if","implements","import","in","interface","is","late","library","mixin","new","null","on","operator","part","required","rethrow","return","sealed","set","show","static","super","switch","sync","this","throw","true","try","typedef","var","void","when","while","with","yield"],built_in:i.concat(s).concat(["Never","Null","dynamic","print","document","querySelector","querySelectorAll","window"]),$pattern:/[A-Za-z][A-Za-z0-9_]*\??/},contains:[r,e.COMMENT(/\/\*\*(?!\/)/,/\*\//,{subLanguage:"markdown",relevance:0}),e.COMMENT(/\/{3,} ?/,/$/,{contains:[{subLanguage:"markdown",begin:".",end:"$",relevance:0}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"class",beginKeywords:"class interface",end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},e.C_NUMBER_MODE,{className:"meta",begin:"@[A-Za-z]+"},{begin:"=>"}]}})),Qe.registerLanguage("nginx",(function(e){const t=e.regex,n={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{\w+\}/},{begin:t.concat(/[$@]/,e.UNDERSCORE_IDENT_RE)}]},r={endsWithParent:!0,keywords:{$pattern:/[a-z_]{2,}|\/dev\/poll/,literal:["on","off","yes","no","true","false","none","blocked","debug","info","notice","warn","error","crit","select","break","last","permanent","redirect","kqueue","rtsig","epoll","poll","/dev/poll"]},relevance:0,illegal:"=>",contains:[e.HASH_COMMENT_MODE,{className:"string",contains:[e.BACKSLASH_ESCAPE,n],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[n]},{className:"regexp",contains:[e.BACKSLASH_ESCAPE,n],variants:[{begin:"\\s\\^",end:"\\s|\\{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|\\{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]?\\b",relevance:0},n]};return{name:"Nginx config",aliases:["nginxconf"],contains:[e.HASH_COMMENT_MODE,{beginKeywords:"upstream location",end:/;|\{/,contains:r.contains,keywords:{section:"upstream location"}},{className:"section",begin:t.concat(e.UNDERSCORE_IDENT_RE+t.lookahead(/\s+\{/)),relevance:0},{begin:t.lookahead(e.UNDERSCORE_IDENT_RE+"\\s"),end:";|\\{",contains:[{className:"attribute",begin:e.UNDERSCORE_IDENT_RE,starts:r}],relevance:0}],illegal:"[^\\s\\}\\{]"}})),Qe.registerLanguage("php",(function(e){const t=e.regex,n=/(?![A-Za-z0-9])(?![$])/,r=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),i=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),s={scope:"variable",match:"\\$+"+r},o={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},a=e.inherit(e.APOS_STRING_MODE,{illegal:null}),l="[ \t\n]",c={scope:"string",variants:[e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(o)}),a,{begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(o),"on:begin":(e,t)=>{t.data._beginMatch=e[1]||e[2]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}},e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/})]},d={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},h=["false","null","true"],u=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],m=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],g={keyword:u,literal:(e=>{const t=[];return e.forEach((e=>{t.push(e),e.toLowerCase()===e?t.push(e.toUpperCase()):t.push(e.toLowerCase())})),t})(h),built_in:m},f=e=>e.map((e=>e.replace(/\|\d+$/,""))),p={variants:[{match:[/new/,t.concat(l,"+"),t.concat("(?!",f(m).join("\\b|"),"\\b)"),i],scope:{1:"keyword",4:"title.class"}}]},b=t.concat(r,"\\b(?!\\()"),y={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),b],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[i,t.concat(/::/,t.lookahead(/(?!class\b)/)),b],scope:{1:"title.class",3:"variable.constant"}},{match:[i,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[i,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},E={scope:"attr",match:t.concat(r,t.lookahead(":"),t.lookahead(/(?!::)/))},w={relevance:0,begin:/\(/,end:/\)/,keywords:g,contains:[E,s,y,e.C_BLOCK_COMMENT_MODE,c,d,p]},_={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",f(u).join("\\b|"),"|",f(m).join("\\b|"),"\\b)"),r,t.concat(l,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[w]};w.contains.push(_);const v=[E,y,e.C_BLOCK_COMMENT_MODE,c,d,p];return{case_insensitive:!1,keywords:g,contains:[{begin:t.concat(/#\[\s*/,i),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:h,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:h,keyword:["new","array"]},contains:["self",...v]},...v,{scope:"meta",match:i}]},e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},{scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},{scope:"variable.language",match:/\$this\b/},s,_,y,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},p,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:g,contains:["self",s,y,e.C_BLOCK_COMMENT_MODE,c,d]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},c,d]}})),Qe.registerLanguage("python",(function(e){const t=e.regex,n=/[\p{XID_Start}_]\p{XID_Continue}*/u,r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],i={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},s={className:"meta",begin:/^(>>>|\.\.\.) /},o={className:"subst",begin:/\{/,end:/\}/,keywords:i,illegal:/#/},a={begin:/\{\{/,relevance:0},l={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,s],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,s],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,s,a,o]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,s,a,o]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,a,o]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,a,o]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},c="[0-9](_?[0-9])*",d=`(\\b(${c}))?\\.(${c})|\\b(${c})\\.`,h=`\\b|${r.join("|")}`,u={className:"number",relevance:0,variants:[{begin:`(\\b(${c})|(${d}))[eE][+-]?(${c})[jJ]?(?=${h})`},{begin:`(${d})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${h})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${h})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${h})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${h})`},{begin:`\\b(${c})[jJ](?=${h})`}]},m={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:i,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},g={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,contains:["self",s,u,l,e.HASH_COMMENT_MODE]}]};return o.contains=[l,u,s],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:i,illegal:/(<\/|\?)|=>/,contains:[s,u,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},l,m,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[g]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[u,g,l]}]}})),Qe.configure({cssSelector:"pre",classPrefix:"editify-hljs-",ignoreUnescapedHTML:!0});const rn=["plaintext","javascript","html","css","less","scss","java","markdown","swift","objectivec","typescript","dart","nginx","php","python"],sn={modelValue:{type:String,default:"<p><br></p>"},placeholder:{type:String,default:""},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},allowCopy:{type:Boolean,default:!0},allowPaste:{type:Boolean,default:!0},allowCut:{type:Boolean,default:!0},allowPasteHtml:{type:Boolean,default:!1},height:{type:String,default:"600px"},autoheight:{type:Boolean,default:!1},border:{type:Boolean,default:!1},color:{type:String,default:"#25caae"},highlight:{type:Boolean,default:!1},highlightLanguages:{type:Array,default:function(){return rn}}},on=(e,t=!1)=>"block"==e.type&&"div"==e.parsedom&&e.hasMarks()&&e.marks["data-editify-list"]==(t?"ol":"ul"),an=e=>{if(on(e,!0)||on(e,!1)){let t={};for(let n in e.marks)"data-editify-list"!=n&&"data-editify-value"!=n&&(t[n]=e.marks[n]);e.marks=t}e.parsedom=E.BLOCK_NODE},ln=function(e){if("ol"!=e.parsedom&&"ul"!=e.parsedom||(e.hasChildren()&&e.children.forEach(((t,n)=>{const r=t.clone();r.parsedom="div",r.type="block",r.hasMarks()||(r.marks={}),r.marks["data-editify-list"]=e.parsedom,"ol"==e.parsedom&&(r.marks["data-editify-value"]=n+1),this.addElementAfter(r,e)})),e.toEmpty()),"block"==e.type&&e.hasMarks()&&"ol"==e.marks["data-editify-list"]){const t=this.getPreviousElement(e);if(t&&t.hasMarks()&&"ol"==t.marks["data-editify-list"]){const n=Number(t.marks["data-editify-value"]);e.marks["data-editify-value"]=n+1}else e.marks["data-editify-value"]=1}},cn=function(e){if("code"==e.parsedom){e.parsedom="span";const t={"data-editify-code":!0};e.hasMarks()?Object.assign(e.marks,t):e.marks=t}},dn=function(e){if("img"==e.parsedom||"video"==e.parsedom||"a"==e.parsedom){const t={"data-editify-element":e.key};e.hasMarks()?Object.assign(e.marks,t):e.marks=t}},hn=function(e){if("table"==e.parsedom){const t={"data-editify-element":e.key};e.hasMarks()?Object.assign(e.marks,t):e.marks=t;const n=E.flatElements(e.children),r=n.filter((e=>"tr"==e.parsedom));let i=n.find((e=>"colgroup"==e.parsedom));if(i)i.children.forEach((e=>{e.hasMarks()?e.marks.width||(e.marks.width="auto"):e.marks={width:"auto"}}));else{i=new E("inblock","colgroup",null,null,null);for(let e=r[0].children.length-1;e>=0;e--){const e=new E("closed","col",{width:"auto"},null,null);this.addElementTo(e,i)}}e.children=[];const s=new E("inblock","tbody",null,null,null);r.reverse().forEach((e=>{this.addElementTo(e,s)})),this.addElementTo(s,e),this.addElementTo(i,e)}else"th"==e.parsedom&&(e.parsedom="td")},un=function(e,t,n){if(this.range.anchor.element.getBlock().isEqual(e)){const e=t.findIndex((e=>this.range.anchor.element.isEqual(e))),r=t.filter(((t,n)=>n<e)).reduce(((e,t,n)=>e+t.textContent.length),0)+this.range.anchor.offset,i=E.flatElements(n).filter((e=>e.isText()&&!e.isEmpty()));let s=0,o=0;for(;s<i.length;){let e=o+i[s].textContent.length;if(r>=o&&r<=e){this.range.anchor.element=i[s],this.range.anchor.offset=r-o;break}s++,o=e}}if(this.range.focus.element.getBlock().isEqual(e)){const e=t.findIndex((e=>this.range.focus.element.isEqual(e))),r=t.filter(((t,n)=>n<e)).reduce(((e,t,n)=>e+t.textContent.length),0)+this.range.focus.offset,i=E.flatElements(n).filter((e=>e.isText()&&!e.isEmpty()));let s=0,o=0;for(;s<i.length;){let e=o+i[s].textContent.length;if(r>=o&&r<=e){this.range.focus.element=i[s],this.range.focus.offset=r-o;break}s++,o=e}}},mn=function(e,t,n){if((e.isBlock()||e.isInblock())&&e.isPreStyle()){const r={"data-editify-element":e.key};if(e.hasMarks()?Object.assign(e.marks,r):e.marks=r,t&&e.hasChildren()){let t=e.marks["data-editify-hljs"]||"";t&&!n.includes(t)&&(t="");const r=E.flatElements(e.children).filter((e=>e.isText()&&!e.isEmpty())),i=function(e,t){return t?Qe.highlight(e,{language:t,ignoreIllegals:!0}).value:Qe.highlightAuto(e).value}(r.reduce(((e,t)=>e+t.textContent),""),t);if(i){const t=this.parseHtml(i);un.apply(this,[e,r,t]),e.children=t,t.forEach((t=>{t.parent=e}))}}}},gn={name:"editify",props:{...sn},emits:["update:modelValue","focus","blur","change","keydown","insertparagraph","rangeupdate","copy","cut","paste-text","paste-html","paste-image","paste-video","before-render","after-render"],setup:()=>({uid:t.getCurrentInstance().uid}),data:()=>({editor:null,isModelChange:!1,isSourceView:!1,isInputChinese:!1,tableColumnResizeParams:{element:null,start:0},innerMarks:["data-editify-list","data-editify-value","data-editify-code","src","autoplay","loop","muted","href","target","alt","controls","name","disabled"],innerStyles:["text-indent","text-align"]}),computed:{value:{set(e){this.$emit("update:modelValue",e)},get(){return this.modelValue||"<p><br></p>"}},showPlaceholder(){if(this.editor){const e=this.editor.parseHtml(this.value);if(1==e.length&&"block"==e[0].type&&e[0].parsedom==E.BLOCK_NODE&&e[0].isOnlyHasBreak())return!this.isInputChinese}return!1},wrapStyle(){return this.autoheight?{minHeight:this.height}:{height:this.height}}},inject:["$editTrans"],watch:{value(e){this.isSourceView||this.isModelChange||(this.editor.stack=this.editor.parseHtml(e),this.editor.formatElementStack(),this.editor.range.anchor.moveToStart(this.editor.stack[0]),this.editor.range.focus.moveToStart(this.editor.stack[0]),this.editor.domRender())}},mounted(){this.createEditor(),$.event.on(document.documentElement,`mousedown.editify_${this.uid}`,this.documentMouseDown),$.event.on(document.documentElement,`mousemove.editify_${this.uid}`,this.documentMouseMove),$.event.on(document.documentElement,`mouseup.editify_${this.uid}`,this.documentMouseUp)},methods:{documentMouseDown(e){if(!this.disabled&&$.element.isContains(this.$refs.wrap,e.target)){const t=e.target,n=$.data.get(t,"data-alex-editor-key");if(n){const r=this.editor.getElementByKey(n);if(r&&"td"==r.parsedom){const n=r.parent.children.length;if(r.parent.children[n-1].isEqual(r))return;const i=$.element.getElementBounding(t);e.pageX>=Math.abs(i.left+t.offsetWidth-5)&&e.pageX<=Math.abs(i.left+t.offsetWidth+5)&&(this.tableColumnResizeParams.element=r,this.tableColumnResizeParams.start=e.pageX)}}}},documentMouseMove(e){if(this.disabled)return;if(!this.tableColumnResizeParams.element)return;const t=this.getCurrentParsedomElement("table");if(!t)return;const n=t.children.find((e=>"colgroup"==e.parsedom)),r=this.tableColumnResizeParams.element.parent.children.findIndex((e=>e.isEqual(this.tableColumnResizeParams.element))),i=""+(this.tableColumnResizeParams.element._elm.offsetWidth+e.pageX-this.tableColumnResizeParams.start);n.children[r].marks.width=i,n.children[r]._elm.setAttribute("width",i),this.tableColumnResizeParams.start=e.pageX},documentMouseUp(e){if(this.disabled)return;if(!this.tableColumnResizeParams.element)return;const t=this.getCurrentParsedomElement("table");if(!t)return;const n=t.children.find((e=>"colgroup"==e.parsedom)),r=this.tableColumnResizeParams.element.parent.children.findIndex((e=>e.isEqual(this.tableColumnResizeParams.element))),i=Number(n.children[r].marks.width);isNaN(i)||(n.children[r].marks.width=`${Number((i/this.tableColumnResizeParams.element.parent._elm.offsetWidth*100).toFixed(2))}%`,this.editor.formatElementStack(),this.editor.domRender(),this.editor.rangeRender()),this.tableColumnResizeParams.element=null,this.tableColumnResizeParams.start=0},internalModify(e){this.isModelChange=!0,this.value=e,this.$nextTick((()=>{this.isModelChange=!1}))},createEditor(){this.editor=new S(this.$refs.wrap,{value:this.value,disabled:this.disabled,renderRules:[ln,cn,dn,hn,e=>{mn.apply(this.editor,[e,this.highlight,this.highlightLanguages])}],allowCopy:this.allowCopy,allowPaste:this.allowPaste,allowCut:this.allowCut,allowPasteHtml:this.allowPasteHtml,allowPasteHtml:this.allowPasteHtml}),this.internalModify(this.editor.value),this.editor.on("change",this.handleEditorChange),this.editor.on("focus",this.handleEditorFocus),this.editor.on("blur",this.handleEditorBlur),this.editor.on("insertParagraph",this.handleInsertParagraph),this.editor.on("rangeUpdate",this.handleRangeUpdate),this.editor.on("copy",this.handleCopy),this.editor.on("cut",this.handleCut),this.editor.on("pasteText",this.handlePasteText),this.editor.on("pasteHtml",this.handlePasteHtml),this.editor.on("pasteImage",this.handlePasteImage),this.editor.on("pasteVideo",this.handlePasteVideo),this.editor.on("deleteInStart",this.handleDelete),this.editor.on("beforeRender",this.handleBeforeRender),this.editor.on("afterRender",this.handleAfterRender),this.editor.formatElementStack(),this.editor.domRender(),!this.autofocus||this.isSourceView||this.disabled||this.collapseToEnd()},handleEditorChange(e,t){this.disabled||(this.internalModify(e),this.$emit("change",e,t))},handleEditorBlur(e){this.disabled||(this.border&&this.color&&this.$refs.wrap&&(this.$refs.wrap.style.borderColor="",this.$refs.wrap.style.boxShadow=""),this.$emit("blur",e))},handleEditorFocus(e){if(!this.disabled){if(this.border&&this.color&&this.$refs.wrap){this.$refs.wrap.style.borderColor=this.color;const e=$.color.hex2rgb(this.color);this.$refs.wrap.style.boxShadow=`0 0 8px rgba(${e[0]},${e[1]},${e[2]},0.5)`}this.$emit("focus",e)}},handleEditorKeydown(e){this.disabled||this.isSourceView||((9!=e.keyCode||e.metaKey||e.shiftKey||e.ctrlKey||e.altKey)&&(9!=e.keyCode||e.metaKey||!e.shiftKey||e.ctrlKey||e.altKey)||e.preventDefault(),this.$emit("keydown",e))},handleEditorClick(e){if(this.disabled||this.isSourceView)return;const t=e.target;if(e.preventDefault(),"img"==t.nodeName.toLocaleLowerCase()||"video"==t.nodeName.toLocaleLowerCase()){const e=t.getAttribute("data-editify-element");if(e){const t=this.editor.getElementByKey(e);this.editor.range.anchor.moveToStart(t),this.editor.range.focus.moveToEnd(t),this.editor.rangeRender()}}},handleInsertParagraph(e,t){t.isOnlyHasBreak()&&e.isOnlyHasBreak()&&(t.isBlock()||t.convertToBlock(),t.parsedom!=E.BLOCK_NODE&&(an(t),this.editor.range.anchor.moveToStart(t),this.editor.range.focus.moveToStart(t),e.toEmpty())),this.$emit("insertparagraph",this.value)},handleRangeUpdate(){this.disabled||this.$emit("rangeupdate",this.value)},handleCopy(e,t){this.$emit("copy",e,t)},handleCut(e,t){this.$emit("cut",e,t)},handlePasteText(e){this.$emit("paste-text",e)},handlePasteHtml(e,t){E.flatElements(t).forEach((e=>{if(e.hasMarks()){let t={};for(let n in e.marks)this.innerMarks.includes(n)&&(t[n]=e.marks[n]);e.marks=t}if(e.isBlock()||e.isInblock()){if(e.hasStyles()){let t={};for(let n in e.styles)this.innerStyles.includes(n)&&(t[n]=e.styles[n]);e.styles=t}}else(e.isInline()||e.isClosed())&&(e.styles=null)})),console.log(t),this.$emit("paste-html",t)},handlePasteImage(e){this.$emit("paste-image",e)},handlePasteVideo(e){this.$emit("paste-video",e)},handleDelete(e){e.isBlock()&&an(e)},handleBeforeRender(){this.$emit("before-render")},handleAfterRender(){this.$emit("after-render")},collapseToEnd(){this.disabled||(this.editor.collapseToEnd(),this.editor.rangeRender(),$.element.setScrollTop({el:this.$refs.wrap,number:1e6,time:0}))},collapseToStart(){this.disabled||(this.editor.collapseToStart(),this.editor.rangeRender(),this.$nextTick((()=>{$.element.setScrollTop({el:this.$refs.wrap,number:0,time:0})})))},getCurrentParsedomElement(e){if(this.disabled)return null;const t=n=>n.isBlock()?n.parsedom==e?n:null:n.isText()||n.parsedom!=e?t(n.parent):n;if(this.editor.range.anchor.element.isEqual(this.editor.range.focus.element))return t(this.editor.range.anchor.element);const n=this.editor.getElementsByRange(!0,!1).map((e=>t(e.element)));if(n.some((e=>null==e)))return null;if(1==n.length)return n[0];let r=!0;for(let i=1;i<n.length;i++)if(!n[i].isEqual(n[0])){r=!1;break}return r?n[0]:null}},beforeUnmount(){$.event.off(document.documentElement,`mousedown.editify_${this.uid} mousemove.editify_${this.uid} mouseup.editify_${this.uid}`),this.editor.destroy()}},fn={class:"editify"},pn=["disabled","data-editify-placeholder"],bn=["value"];const yn=((e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n})(gn,[["render",function(e,n,r,i,s,o){return t.openBlock(),t.createElementBlock("div",fn,[t.createElementVNode("div",{ref:"wrap",class:t.normalizeClass(["editify-wrap",{border:e.border,placeholder:o.showPlaceholder}]),disabled:e.disabled||null,style:t.normalizeStyle(o.wrapStyle),onKeydown:n[0]||(n[0]=(...e)=>o.handleEditorKeydown&&o.handleEditorKeydown(...e)),onClick:n[1]||(n[1]=(...e)=>o.handleEditorClick&&o.handleEditorClick(...e)),onCompositionstart:n[2]||(n[2]=e=>s.isInputChinese=!0),onCompositionend:n[3]||(n[3]=e=>s.isInputChinese=!1),"data-editify-placeholder":e.placeholder},null,46,pn),s.isSourceView?(t.openBlock(),t.createElementBlock("textarea",{key:0,value:o.value,readonly:"",class:"editify-source"},null,8,bn)):t.createCommentVNode("",!0)])}],["__scopeId","data-v-4c6fdfbf"]]),En={zh_CN:{hello:"你好"},en_US:{hello:"Hello"}},wn="0.0.1",_n=(e,t)=>{const n=(t?t.locale:"zh_CN")||"zh_CN";e.provide("$editTrans",(e=>t=>En[e][t])(n)),e.component(yn.name,yn)},vn={install:_n,version:wn};e.default=vn,e.install=_n,e.version=wn,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
